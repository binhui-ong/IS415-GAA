<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-03-24">

<title>Bin Hui’s IS415-GAA Journal - Take-home Exercise 3: Prototyping Modules for Geospatial Analytics Shiny Application</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Bin Hui’s IS415-GAA Journal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex04/Hands-on_Ex04.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex07/Hands-on_Ex07.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex09/Hands-on_Ex09.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 9</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex10/Hands-on_Ex10.html" rel="" target="">
 <span class="dropdown-text">Hands-on Exercise 10</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">In-class Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex02/In-class_Ex02.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex03/In-class_Ex03.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex04/In-class_Ex04.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex05/In-class_Ex05.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex06/In-class_Ex06.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex07/In-class_Ex07.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex08/In-class_Ex08.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 8</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex09/In-class_Ex09.html" rel="" target="">
 <span class="dropdown-text">In-class Exercise 9</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Take-home Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html" rel="" target="">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html" rel="" target="">
 <span class="dropdown-text">Take-home Exercise 2 (Part 1)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex02/Take-home_Ex02_2.html" rel="" target="">
 <span class="dropdown-text">Take-home Exercise 2 (Part 2)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html" rel="" target="">
 <span class="dropdown-text">Take-home Exercise 3</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">1 Overview</a>
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">1.1 Background</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">1.2 Objectives</a></li>
  <li><a href="#the-task" id="toc-the-task" class="nav-link" data-scroll-target="#the-task">1.3 The Task</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">1.4 The Data</a></li>
  <li><a href="#installing-and-loading-r-packages" id="toc-installing-and-loading-r-packages" class="nav-link" data-scroll-target="#installing-and-loading-r-packages">1.5 Installing and Loading R Packages</a></li>
  </ul></li>
  <li><a href="#data-preparation-geospatial" id="toc-data-preparation-geospatial" class="nav-link" data-scroll-target="#data-preparation-geospatial">2 Data Preparation (Geospatial)</a>
  <ul class="collapse">
  <li><a href="#data-import" id="toc-data-import" class="nav-link" data-scroll-target="#data-import">2.1 Data Import</a>
  <ul class="collapse">
  <li><a href="#master-plan-2019" id="toc-master-plan-2019" class="nav-link" data-scroll-target="#master-plan-2019">2.1.1 Master Plan 2019</a></li>
  <li><a href="#eldercare-services" id="toc-eldercare-services" class="nav-link" data-scroll-target="#eldercare-services">2.1.2 Eldercare services</a></li>
  <li><a href="#community-gardens" id="toc-community-gardens" class="nav-link" data-scroll-target="#community-gardens">2.1.3 Community Gardens</a></li>
  <li><a href="#chas-clinics" id="toc-chas-clinics" class="nav-link" data-scroll-target="#chas-clinics">2.1.4 CHAS clinics</a></li>
  <li><a href="#other-amenities-hospitals-community-centres-parks" id="toc-other-amenities-hospitals-community-centres-parks" class="nav-link" data-scroll-target="#other-amenities-hospitals-community-centres-parks">2.1.5 Other amenities (Hospitals, Community Centres, Parks)</a></li>
  </ul></li>
  <li><a href="#visualization-of-imported-data" id="toc-visualization-of-imported-data" class="nav-link" data-scroll-target="#visualization-of-imported-data">2.2 Visualization of imported data</a></li>
  <li><a href="#data-pre-processing" id="toc-data-pre-processing" class="nav-link" data-scroll-target="#data-pre-processing">2.3 Data Pre-Processing</a>
  <ul class="collapse">
  <li><a href="#dropping-z-dimension" id="toc-dropping-z-dimension" class="nav-link" data-scroll-target="#dropping-z-dimension">2.3.1 Dropping Z-dimension</a></li>
  <li><a href="#resolving-invalid-geometries" id="toc-resolving-invalid-geometries" class="nav-link" data-scroll-target="#resolving-invalid-geometries">2.3.2 Resolving invalid geometries</a></li>
  <li><a href="#handling-missing-values" id="toc-handling-missing-values" class="nav-link" data-scroll-target="#handling-missing-values">2.2.3 Handling missing values</a></li>
  <li><a href="#changing-and-verifying-crs" id="toc-changing-and-verifying-crs" class="nav-link" data-scroll-target="#changing-and-verifying-crs">2.3.4 Changing and verifying CRS</a></li>
  <li><a href="#extraction-of-relevant-columns" id="toc-extraction-of-relevant-columns" class="nav-link" data-scroll-target="#extraction-of-relevant-columns">2.3.6 Extraction of relevant columns</a></li>
  <li><a href="#extraction-of-study-area" id="toc-extraction-of-study-area" class="nav-link" data-scroll-target="#extraction-of-study-area">2.3.7 Extraction of study area</a></li>
  </ul></li>
  <li><a href="#extracting-types-of-other-amenities" id="toc-extracting-types-of-other-amenities" class="nav-link" data-scroll-target="#extracting-types-of-other-amenities">2.4 Extracting types of other amenities</a></li>
  <li><a href="#inserting-capacity-columns-into-facilities-data-frames" id="toc-inserting-capacity-columns-into-facilities-data-frames" class="nav-link" data-scroll-target="#inserting-capacity-columns-into-facilities-data-frames">2.5 Inserting capacity columns into facilities data frames</a></li>
  </ul></li>
  <li><a href="#data-preparation-aspatial-data" id="toc-data-preparation-aspatial-data" class="nav-link" data-scroll-target="#data-preparation-aspatial-data">3 Data Preparation (Aspatial Data)</a></li>
  <li><a href="#joining-geospatial-and-aspatial-data" id="toc-joining-geospatial-and-aspatial-data" class="nav-link" data-scroll-target="#joining-geospatial-and-aspatial-data">4 Joining geospatial and aspatial data</a></li>
  <li><a href="#creating-hexagon-data" id="toc-creating-hexagon-data" class="nav-link" data-scroll-target="#creating-hexagon-data">5 Creating hexagon data</a>
  <ul class="collapse">
  <li><a href="#making-a-hexagon-object" id="toc-making-a-hexagon-object" class="nav-link" data-scroll-target="#making-a-hexagon-object">5.1 Making a hexagon object</a></li>
  <li><a href="#deriving-hexagon-of-singapore-main-island" id="toc-deriving-hexagon-of-singapore-main-island" class="nav-link" data-scroll-target="#deriving-hexagon-of-singapore-main-island">5.2 Deriving hexagon of Singapore main island</a></li>
  <li><a href="#inserting-attributes-into-hexagon" id="toc-inserting-attributes-into-hexagon" class="nav-link" data-scroll-target="#inserting-attributes-into-hexagon">5.3 Inserting attributes into hexagon</a></li>
  </ul></li>
  <li><a href="#preparing-distance-matrix" id="toc-preparing-distance-matrix" class="nav-link" data-scroll-target="#preparing-distance-matrix">6 Preparing Distance Matrix</a>
  <ul class="collapse">
  <li><a href="#convert-from-sf-data.table-to-spatialpolygonsdataframe" id="toc-convert-from-sf-data.table-to-spatialpolygonsdataframe" class="nav-link" data-scroll-target="#convert-from-sf-data.table-to-spatialpolygonsdataframe">6.1.1 Convert from sf data.table to SpatialPolygonsDataFrame</a></li>
  <li><a href="#computing-distance-matrix" id="toc-computing-distance-matrix" class="nav-link" data-scroll-target="#computing-distance-matrix">6.1.2 Computing distance matrix</a></li>
  <li><a href="#labelling-column-and-row-headers-of-distance-matrix" id="toc-labelling-column-and-row-headers-of-distance-matrix" class="nav-link" data-scroll-target="#labelling-column-and-row-headers-of-distance-matrix">6.1.3 Labelling column and row headers of distance matrix</a></li>
  <li><a href="#distance-matrix-in-kilometres" id="toc-distance-matrix-in-kilometres" class="nav-link" data-scroll-target="#distance-matrix-in-kilometres">6.1.6 Distance matrix in kilometres</a></li>
  </ul></li>
  <li><a href="#modelling-and-visualizing-accesssibility-using-hansen-method" id="toc-modelling-and-visualizing-accesssibility-using-hansen-method" class="nav-link" data-scroll-target="#modelling-and-visualizing-accesssibility-using-hansen-method">7 Modelling and Visualizing Accesssibility using Hansen Method</a>
  <ul class="collapse">
  <li><a href="#computing-hansens-accessibility" id="toc-computing-hansens-accessibility" class="nav-link" data-scroll-target="#computing-hansens-accessibility">7.1 Computing Hansen’s accessibility</a></li>
  <li><a href="#visualizing-hansens-accessibility" id="toc-visualizing-hansens-accessibility" class="nav-link" data-scroll-target="#visualizing-hansens-accessibility">7.2 Visualizing Hansen’s accessibility</a>
  <ul class="collapse">
  <li><a href="#extracting-map-extend" id="toc-extracting-map-extend" class="nav-link" data-scroll-target="#extracting-map-extend">7.2.1 Extracting map extend</a></li>
  <li><a href="#visualization" id="toc-visualization" class="nav-link" data-scroll-target="#visualization">7.2.2 Visualization</a></li>
  </ul></li>
  <li><a href="#statistical-graphic-visualization" id="toc-statistical-graphic-visualization" class="nav-link" data-scroll-target="#statistical-graphic-visualization">7.3 Statistical graphic visualization</a></li>
  </ul></li>
  <li><a href="#modelling-and-visualizing-accesssibility-using-kd2sfca-method" id="toc-modelling-and-visualizing-accesssibility-using-kd2sfca-method" class="nav-link" data-scroll-target="#modelling-and-visualizing-accesssibility-using-kd2sfca-method">8 Modelling and Visualizing Accesssibility using KD2SFCA Method</a>
  <ul class="collapse">
  <li><a href="#computing-kd2sfcas-accessibility" id="toc-computing-kd2sfcas-accessibility" class="nav-link" data-scroll-target="#computing-kd2sfcas-accessibility">8.1 Computing KD2SFCA’s accessibility</a></li>
  <li><a href="#visualizing-kd2sfcas-accessibility" id="toc-visualizing-kd2sfcas-accessibility" class="nav-link" data-scroll-target="#visualizing-kd2sfcas-accessibility">8.2 Visualizing KD2SFCA’s accessibility</a></li>
  <li><a href="#statistical-graphic-visualization-1" id="toc-statistical-graphic-visualization-1" class="nav-link" data-scroll-target="#statistical-graphic-visualization-1">8.3 Statistical graphic visualization</a></li>
  </ul></li>
  <li><a href="#modelling-and-visualizing-accessibility-using-sam-method" id="toc-modelling-and-visualizing-accessibility-using-sam-method" class="nav-link" data-scroll-target="#modelling-and-visualizing-accessibility-using-sam-method">9 Modelling and Visualizing Accessibility using SAM Method</a>
  <ul class="collapse">
  <li><a href="#computing-sams-accessibility" id="toc-computing-sams-accessibility" class="nav-link" data-scroll-target="#computing-sams-accessibility">9.1 Computing SAM’s accessibility</a></li>
  <li><a href="#visualizing-sams-accessibility" id="toc-visualizing-sams-accessibility" class="nav-link" data-scroll-target="#visualizing-sams-accessibility">9.2 Visualizing SAM’s accessibility</a></li>
  <li><a href="#statistical-graphic-visualization-2" id="toc-statistical-graphic-visualization-2" class="nav-link" data-scroll-target="#statistical-graphic-visualization-2">9.3 Statistical graphic visualization</a></li>
  </ul></li>
  <li><a href="#moving-forward-project-ui-design" id="toc-moving-forward-project-ui-design" class="nav-link" data-scroll-target="#moving-forward-project-ui-design">10 Moving Forward: Project UI Design</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Exercise 3: Prototyping Modules for Geospatial Analytics Shiny Application</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 24, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="overview" class="level1">
<h1>1 Overview</h1>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">1.1 Background</h2>
<p>Singapore is experiencing an ageing population, with an increasing proportion of the citizens aged 65 and older <a href="https://www.cnbc.com/2023/10/30/as-singapores-aging-population-grows-businesses-court-older-spenders.html">by 11.7% compared to 10 years ago</a>. In addition, the life expectancy of Singaporeans has been steadily <a href="https://smartwealth.sg/life-expectancy/">rising over the past five decades</a>. This has prompted the government to commit to building more eldercare facilities nationwide. Alongside this has come a push for <a href="https://www.moh.gov.sg/ifeelyoungsg/how-can-i-age-actively/stay-healthy/active-ageing-programmes">Active Ageing</a> to encourage the elderly to “stay active, healthy and socially engaged”. To achieve this goal, the government has also been trying to <a href="https://www.straitstimes.com/singapore/politics/ndr-2023-active-ageing-centres-to-be-expanded-to-help-seniors-stay-active-and-healthy">increase the number of active ageing centres</a> and possible locations for activities to make it more accessible to seniors.</p>
<p>Our project would like to understand what the current distribution of eldercare facilities and amenities is across Singapore and selected planning areas within Singapore. We want to investigate whether there are enough facilities and amenities to ensure that the elderly not just age healthily, but age well. We also want to understand whether the facilities are spatially randomly distributed, and whether they are accessible from places of demand. In this particular take-home exercise, out focus will be on the accesibility of the following facilities from residential areas of elderly demand:</p>
<p>Eldercare centres: Shared places of activities and bonding targeted at the elderly</p>
<p>Community gardens: Community gardens where the elderly can pursue their gardening hobbies, or hang out with other residents</p>
<p>Community Centres: Shared places in the residential area, where residents from different walks can and bond over activities. There are activities targeted specifically at the elderly, such as cooking workshops and dancing classes, helping them maintain</p>
<p>Parks: Shared public places where the elderly can engage in outdoor physical activities to maintain an active lifestyle</p>
<p>CHAS clinics: Clinics with CHAS (Community Health Assist Scheme), which allow eligible elderly to get access to medical services at subsidized rates.</p>
<p>Hospitals: Hospitals that provide more thorough and comprehensive health services to the elderly.</p>
</section>
<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">1.2 Objectives</h2>
<p>In this take-home exercise, our objective is to model geographical accessibility of the abovementioned 6 facilities relevant to the elderly using R’s geospatial analysis packages.</p>
</section>
<section id="the-task" class="level2">
<h2 class="anchored" data-anchor-id="the-task">1.3 The Task</h2>
<p>Through this exercise, we will conduct the following procedures</p>
<ul>
<li><p>Install and load relevant R packages</p></li>
<li><p>Import data of various formats (shapefile, geojson, kml, csv)</p></li>
<li><p>Clean and wrangle data into our desired formats</p></li>
<li><p>Compute accessibility measure using Hansen’s potential model, KD2SFCA model, and Spatial Accessibility Method</p></li>
<li><p>Visualize accessibility measures using tmap and ggplot2 packages</p></li>
</ul>
</section>
<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">1.4 The Data</h2>
<table class="table">
<thead>
<tr class="header">
<th>Dataset</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.singstat.gov.sg/-/media/files/find_data/population/statistical_tables/respopagesextod2023.ashx">Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2023</a></td>
<td><ul>
<li><p>Source: Department of Statistics, Singapore</p></li>
<li><p>Content: Attribute data containing the number of Singapore residents by planning area, subzone, age group, sex and type of dwelling, in 2023</p></li>
<li><p>Type: Polygon Data</p></li>
<li><p>Format: csv</p></li>
</ul></td>
</tr>
<tr class="even">
<td><a href="https://beta.data.gov.sg/collections/1749/view">Master Plan 2019 Subzone Boundary (No Sea)</a></td>
<td><ul>
<li><p>Source: Urban Redevelopment Authority (URA)</p></li>
<li><p>Content: Geospatial data containing Singapore subzones, planning areas, and regions</p></li>
<li><p>Type: Polygon Data</p></li>
<li><p>Format: geojson</p></li>
</ul></td>
</tr>
<tr class="odd">
<td><a href="https://beta.data.gov.sg/collections/714/datasets/d_3545b068e3f3506c56b2cb6b6117b884/view">Eldercare Services</a></td>
<td><ul>
<li><p>Source: Ministry of Health, Singapore</p></li>
<li><p>Content: Geospatial and attribute data containing the records of eldercare services in Singapore as of February 29, 2024</p></li>
<li><p>Type: Point Data</p></li>
<li><p>Format: shapefile</p></li>
</ul></td>
</tr>
<tr class="even">
<td><a href="https://download.geofabrik.de/">Pois Data Set</a></td>
<td><ul>
<li><p>Source: OpenStreetMap of Geofabrik server</p></li>
<li><p>Content: Facilties in Malaysia, Singapore and Brunei (e.g.&nbsp;parks, community centres, hospital)</p></li>
<li><p>Type: Polygon Data</p></li>
<li><p>Format: shapefile</p></li>
</ul></td>
</tr>
<tr class="odd">
<td><a href="https://beta.data.gov.sg/collections/1479/view">Community in Bloom</a> (CIB)</td>
<td><ul>
<li><p>Source: National Parks Board, Singapore</p></li>
<li><p>Content: Community gardens in Singapore</p></li>
<li><p>Type: Point Data</p></li>
<li><p>Format: kml</p></li>
</ul></td>
</tr>
<tr class="even">
<td><a href="https://beta.data.gov.sg/collections/2036/view">CHAS clinics</a></td>
<td><ul>
<li><p>Source: Ministry of Health, Singapore</p></li>
<li><p>Content: CHAS clinics in Singapore</p></li>
<li><p>Type: Point Data</p></li>
<li><p>Format: geojson</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
<section id="installing-and-loading-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="installing-and-loading-r-packages">1.5 Installing and Loading R Packages</h2>
<p>In this exercise, the following R packages would be used:</p>
<p>Then, to install and/or load the R packages, we can use p_load() from the <strong>pacman</strong> package.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(sf, tidyverse, tmap, SpatialAcc, ggplot2, ggstatsplot, sp, reshape2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="data-preparation-geospatial" class="level1">
<h1>2 Data Preparation (Geospatial)</h1>
<section id="data-import" class="level2">
<h2 class="anchored" data-anchor-id="data-import">2.1 Data Import</h2>
<p>Let’s begin by introducing and preparing our geospatial data set in R!</p>
<p>To import geospatial data, we will be using st_read() from the <strong>sf</strong> package.</p>
<section id="master-plan-2019" class="level3">
<h3 class="anchored" data-anchor-id="master-plan-2019">2.1.1 Master Plan 2019</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>mpsz2019 <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/MasterPlan2019SubzoneBoundaryNoSeaGEOJSON.geojson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mpsz2019</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 332 features and 2 fields
Geometry type: MULTIPOLYGON
Dimension:     XY, XYZ
Bounding box:  xmin: 103.6057 ymin: 1.158699 xmax: 104.0885 ymax: 1.470775
z_range:       zmin: 0 zmax: 0
Geodetic CRS:  WGS 84
First 10 features:
     Name
1   kml_1
2   kml_2
3   kml_3
4   kml_4
5   kml_5
6   kml_6
7   kml_7
8   kml_8
9   kml_9
10 kml_10
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Description
1          &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;12&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;DEPOT ROAD&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;BMSZ12&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;N&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;BUKIT MERAH&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;BM&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;C22DED671DE2A940&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
2          &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;2&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;BUKIT MERAH&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;BMSZ02&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;N&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;BUKIT MERAH&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;BM&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;085EF219A5A1AEAD&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
3                 &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;3&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;CHINATOWN&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;OTSZ03&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;Y&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;OUTRAM&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;OT&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;EF2B9A91AF49E025&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
4            &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;4&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;PHILLIP&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;DTSZ04&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;Y&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;DOWNTOWN CORE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;DT&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;615D4EDDEF809F8E&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
5      &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;5&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;RAFFLES PLACE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;DTSZ05&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;Y&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;DOWNTOWN CORE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;DT&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;72107B11807074F4&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
6              &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;4&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;CHINA SQUARE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;OTSZ04&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;Y&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;OUTRAM&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;OT&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;B609DF5587626C8F&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
7         &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;10&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;TIONG BAHRU&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;BMSZ10&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;N&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;BUKIT MERAH&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;BM&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;A0FB4B68155D164A&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
8  &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;12&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;BAYFRONT SUBZONE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;DTSZ12&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;Y&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;DOWNTOWN CORE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;DT&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;197F5E664DA4D5E1&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
9  &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;4&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;TIONG BAHRU STATION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;BMSZ04&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;N&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;BUKIT MERAH&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;BM&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;91FFE927ABE3E4DB&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
10     &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_NO&lt;/th&gt; &lt;td&gt;6&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;CLIFFORD PIER&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;SUBZONE_C&lt;/th&gt; &lt;td&gt;DTSZ06&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CA_IND&lt;/th&gt; &lt;td&gt;Y&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;DOWNTOWN CORE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;PLN_AREA_C&lt;/th&gt; &lt;td&gt;DT&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;REGION_N&lt;/th&gt; &lt;td&gt;CENTRAL REGION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;REGION_C&lt;/th&gt; &lt;td&gt;CR&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;945CC212CA80626F&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20191223152313&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
                         geometry
1  MULTIPOLYGON Z (((103.8145 ...
2  MULTIPOLYGON Z (((103.8221 ...
3  MULTIPOLYGON Z (((103.8438 ...
4  MULTIPOLYGON Z (((103.8496 ...
5  MULTIPOLYGON Z (((103.8525 ...
6  MULTIPOLYGON Z (((103.8486 ...
7  MULTIPOLYGON Z (((103.8311 ...
8  MULTIPOLYGON Z (((103.8589 ...
9  MULTIPOLYGON Z (((103.8283 ...
10 MULTIPOLYGON Z (((103.8552 ...</code></pre>
</div>
</div>
<p>From the above, we can see that the <strong>mpsz2019</strong> data is a multipolygon data in geodetic CRS WGS84, with Z dimensions.</p>
</section>
<section id="eldercare-services" class="level3">
<h3 class="anchored" data-anchor-id="eldercare-services">2.1.2 Eldercare services</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>eldercare_services <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"/Users/binhui-ong/IS415-GAA/Take-home_Ex/Take-home_Ex03/data"</span>,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">layer =</span> <span class="st">"ELDERCARE"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>eldercare_services</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 133 features and 18 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 14481.92 ymin: 28218.43 xmax: 41665.14 ymax: 46804.9
Projected CRS: SVY21
First 10 features:
   OBJECTID ADDRESSBLO ADDRESSBUI ADDRESSPOS
1         1       &lt;NA&gt;       &lt;NA&gt;     601318
2         2       &lt;NA&gt;       &lt;NA&gt;     462509
3         3       &lt;NA&gt;       &lt;NA&gt;     640190
4         4       &lt;NA&gt;       &lt;NA&gt;     190005
5         5       &lt;NA&gt;       &lt;NA&gt;     160044
6         6       &lt;NA&gt;       &lt;NA&gt;     160117
7         7       &lt;NA&gt;       &lt;NA&gt;     523499
8         8       &lt;NA&gt;       &lt;NA&gt;     731569
9         9       &lt;NA&gt;       &lt;NA&gt;     651210
10       10       &lt;NA&gt;       &lt;NA&gt;     540182
                              ADDRESSSTR ADDRESSTYP DESCRIPTIO HYPERLINK
1      318A Jurong East Avenue 1 #02-308       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
2  Blk 509B Bedok North Street 3 #02-157       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
3         Blk 190 Boon Lay Drive #01-242       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
4                    5 Beach Rd #02-4943       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
5             Blk 44 Beo Crescent #01-67       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
6     Blk 117 Jalan Bukit Merah #01-1683       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
7            499C Tampines Ave 9 #01-256       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
8              569A Champion Way #01-346       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
9         210A Bukit Batok St 21 #01-294       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
10   Blk 182 Rivervale Crescent\n#01-311       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
   LANDXADDRE LANDYADDRE
1           0          0
2           0          0
3           0          0
4           0          0
5           0          0
6           0          0
7           0          0
8           0          0
9           0          0
10          0          0
                                                           NAME PHOTOURL
1                                  Yuhua Senior Activity Centre     &lt;NA&gt;
2                                          THK SAC @ Kaki Bukit     &lt;NA&gt;
3                                            THK SAC @ Boon Lay     &lt;NA&gt;
4                        PEACE-Connect Senior Activity Centre@5     &lt;NA&gt;
5                                        THK SAC @ Beo Crescent     &lt;NA&gt;
6                                      Silver ACE @ Bukit Merah     &lt;NA&gt;
7  Lions Befrienders Senior Activity Centre @ Tampines Blk 499C     &lt;NA&gt;
8                    Care Corner Senior Activity Centre (WL569)     &lt;NA&gt;
9           Fei Yue Senior Activity Centre (Bukit Batok Branch)     &lt;NA&gt;
10       COMNET Senior Activity Centre @ 182 Rivervale Crescent     &lt;NA&gt;
   ADDRESSFLO          INC_CRC FMEL_UPD_D ADDRESSUNI   X_ADDR   Y_ADDR
1        &lt;NA&gt; 2B0DB92FDD914FFC 2016-07-28       &lt;NA&gt; 16614.08 36639.12
2        &lt;NA&gt; 82728FA30612F3FD 2016-07-28       &lt;NA&gt; 38803.81 35098.78
3        &lt;NA&gt; DE7A8D4EA0BD1D9B 2016-07-28       &lt;NA&gt; 14481.92 36357.61
4        &lt;NA&gt; A2C058FC5785F7FE 2016-07-28       &lt;NA&gt; 31505.35 31853.52
5        &lt;NA&gt; 9DBFD51E056AEE70 2016-07-28       &lt;NA&gt; 27218.35 30135.49
6        &lt;NA&gt; 169DABA5B6ECEA87 2016-07-28       &lt;NA&gt; 27278.94 29350.17
7        &lt;NA&gt; 5DB6B9F0BF276F6D 2016-07-28       &lt;NA&gt; 41665.14 37956.92
8        &lt;NA&gt; 4DC6800E9BB385BE 2016-07-28       &lt;NA&gt; 23147.94 45761.17
9        &lt;NA&gt; EFBD712DA5DD6FEC 2016-07-28       &lt;NA&gt; 18820.58 36396.32
10       &lt;NA&gt; 6BB0D7698D7B4C7D 2016-07-28       &lt;NA&gt; 36446.37 41376.90
                    geometry
1  POINT (16614.08 36639.12)
2  POINT (38803.81 35098.78)
3  POINT (14481.92 36357.61)
4  POINT (31505.35 31853.52)
5  POINT (27218.35 30135.49)
6  POINT (27278.94 29350.17)
7  POINT (41665.14 37956.92)
8  POINT (23147.94 45761.17)
9  POINT (18820.58 36396.32)
10  POINT (36446.37 41376.9)</code></pre>
</div>
</div>
<p>The eldercare_services data set is point data, with dimensions XY and CRS SVY21.</p>
</section>
<section id="community-gardens" class="level3">
<h3 class="anchored" data-anchor-id="community-gardens">2.1.3 Community Gardens</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>gardensg <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"/Users/binhui-ong/IS415-GAA/Take-home_Ex/Take-home_Ex03/data/CommunityinBloomCIB.kml"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>gardensg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 1586 features and 2 fields
Geometry type: POINT
Dimension:     XYZ
Bounding box:  xmin: 103.6337 ymin: 1.247904 xmax: 103.9901 ymax: 1.46195
z_range:       zmin: 0 zmax: 0
Geodetic CRS:  WGS 84
First 10 features:
                                                                 Name
1                                  Boon Lay Zone F Residents' Network
2                       Bishan Home (For The Intellectually Disabled)
3              Lion's Home for the Elders (Bishan) Senior Care Centre
4                                          Zion Kindergarten (Bishan)
5                             Macpherson Zone B  Residents' Committee
6                               Kuo Chuan Presbyterian Primary School
7                        Toa Payoh East Zone '5' Residents' Committee
8                              CHIJ Katong Convent (Secondary) School
9                             Kuo Chuan Presbyterian Secondary School
10 Tampines Grace RN (Greenlace, Greenforest, Green Flora &amp; Tapestry)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Description
1                                                                           &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Boon Lay Zone F Residents' Network&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Boon Lay Zone F Residents' Network&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.344691&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.702112&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
2                                                     &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Bishan Home (For The Intellectually Disabled)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;2&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Bishan Home (For The Intellectually Disabled)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.347525&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.854656&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
3                                   &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Lion's Home for the Elders (Bishan) Senior Care Centre&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;3&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Lion's Home for the Elders (Bishan) Senior Care Centre&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.349261&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.853511&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
4                                                                                           &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Zion Kindergarten (Bishan)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;4&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Zion Kindergarten (Bishan)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.347374&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.854621&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
5                                                                 &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Macpherson Zone B  Residents' Committee&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;5&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Macpherson Zone B  Residents' Committee&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.327456&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.887222&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
6                                                                     &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Kuo Chuan Presbyterian Primary School&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;6&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Kuo Chuan Presbyterian Primary School&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.349116&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.854727&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
7                                                        &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Toa Payoh East Zone '5' Residents' Committee&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;7&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Toa Payoh East Zone '5' Residents' Committee&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.331044&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.85903&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
8                                                                    &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;CHIJ Katong Convent (Secondary) School&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;8&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;CHIJ Katong Convent (Secondary) School&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.306593&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.91739&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
9                                                                 &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Kuo Chuan Presbyterian Secondary School&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;9&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Kuo Chuan Presbyterian Secondary School&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.350135&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.854907&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
10 &lt;html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt"&gt; &lt;head&gt; &lt;META http-equiv="Content-Type" content="text/html"&gt; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; &lt;/head&gt; &lt;body style="margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;"&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px"&gt; &lt;tr style="text-align:center;font-weight:bold;background:#9CBCE2"&gt; &lt;td&gt;Tampines Grace RN (Greenlace, Greenforest, Green Flora &amp;amp; Tapestry)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;table style="font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px"&gt; &lt;tr&gt; &lt;td&gt;GARDENID&lt;/td&gt; &lt;td&gt;10&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;GARDEN_NAME&lt;/td&gt; &lt;td&gt;Tampines Grace RN (Greenlace, Greenforest, Green Flora &amp;amp; Tapestry)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;LATITUDE&lt;/td&gt; &lt;td&gt;1.356087&lt;/td&gt; &lt;/tr&gt; &lt;tr bgcolor="#D4E4F3"&gt; &lt;td&gt;LONGITUDE&lt;/td&gt; &lt;td&gt;103.931752&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt;&lt;script type="text/javascript"&gt; function changeImage(attElement, nameElement) { document.getElementById('imageAttachment').src = attElement; document.getElementById('imageName').innerHTML = nameElement;} &lt;/script&gt;&lt;/html&gt;
                        geometry
1  POINT Z (103.7021 1.344691 0)
2  POINT Z (103.8547 1.347525 0)
3  POINT Z (103.8535 1.349261 0)
4  POINT Z (103.8546 1.347374 0)
5  POINT Z (103.8872 1.327456 0)
6  POINT Z (103.8547 1.349116 0)
7   POINT Z (103.859 1.331044 0)
8  POINT Z (103.9174 1.306593 0)
9  POINT Z (103.8549 1.350135 0)
10 POINT Z (103.9318 1.356087 0)</code></pre>
</div>
</div>
<p>We see that the <strong>gardens</strong> data set is of point data type, has XYZ dimension, and CRS is WGS84.</p>
</section>
<section id="chas-clinics" class="level3">
<h3 class="anchored" data-anchor-id="chas-clinics">2.1.4 CHAS clinics</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>chassg <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"/Users/binhui-ong/IS415-GAA/Take-home_Ex/Take-home_Ex03/data/CHASClinics.geojson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `CHASClinics' from data source 
  `/Users/binhui-ong/IS415-GAA/Take-home_Ex/Take-home_Ex03/data/CHASClinics.geojson' 
  using driver `GeoJSON'
Simple feature collection with 1193 features and 2 fields
Geometry type: POINT
Dimension:     XYZ
Bounding box:  xmin: 103.5818 ymin: 1.016264 xmax: 103.9903 ymax: 1.456037
z_range:       zmin: 0 zmax: 0
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>chassg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 1193 features and 2 fields
Geometry type: POINT
Dimension:     XYZ
Bounding box:  xmin: 103.5818 ymin: 1.016264 xmax: 103.9903 ymax: 1.456037
z_range:       zmin: 0 zmax: 0
Geodetic CRS:  WGS 84
First 10 features:
     Name
1   kml_1
2   kml_2
3   kml_3
4   kml_4
5   kml_5
6   kml_6
7   kml_7
8   kml_8
9   kml_9
10 kml_10
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Description
1                               &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;15M0211&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Acumed Medical Group&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;68615755&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;629117&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;B&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;23&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;JOO KOON CIRCLE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;FAIRPRICE HUB&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CDMP,CHAS&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;10760.19030171&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;34206.12386783&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;781AF3FC7E4D0301&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
2  &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;16M0004&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Acumed Medical Group&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;65701390&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;637370&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;B&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;128&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;03&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;TUAS SOUTH AVENUE 3&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;JTC BIOMED ONE @ TUAS BIOMEDICAL PARK&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CDMP,CHAS&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;4985.53397365&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;30167.98804538&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;4132D1A643933D75&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
3                                   &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;21M0229&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Advantage Medical Clinic&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;87840093&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;268802&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;B&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;03&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;12&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;FIFTH AVENUE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;GUTHRIE HOUSE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CHAS&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;23812.58956922&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;34780.57533007&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;1429766D7056AA8D&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
4                          &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;19M0160&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Affinity Medical Clinic&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;62808080&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;550253&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;A&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;253&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;187&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;SERANGOON CENTRAL DRIVE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CDMP,CHAS,ISP&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;32176.99089858&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;37348.34529089&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;25E32F8453AEABFD&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
5        &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;9404401&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Allergy, Arthritis &amp; Rheumatism Clinic&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MD&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;64749438&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;217562&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;B&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;14&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;13&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;FARRER PARK STATION ROAD&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;CONNEXION&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CDMP,CHAS&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;30293.80179285&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;32752.14975386&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;E04B63460D9DF892&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
6                                        &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;17M0228&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Allhealth Family Clinic&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;67026467&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;523872&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;A&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;872C&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;TAMPINES STREET 86&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CHAS&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;38940.52504647&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;37479.79536068&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;5B0B49E22956F1B3&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
7                                          &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;19M0341&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Ally Health&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;66977700&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;140462&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;A&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;46-2&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;372&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;COMMONWEALTH DRIVE&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CDMP,CHAS,ISP&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;24094.68699586&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;31368.73817961&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;C5F9B14203C0367F&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
8       &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;16M0043&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Ang Mo Kio Family Medicine Clinic&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;65541133&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;569841&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;4190&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;03&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;ANG MO KIO AVENUE 6&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;BROADWAY PLAZA&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CDMP,CHAS,ISP&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;29405.66118025&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;39327.37454678&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;4A712102C8E400A3&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
9                            &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;16C0397&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Anteh Dispensary Pte Ltd&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;67440040&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;398664&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;02&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;LORONG 22 GEYLANG&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;GRANDVIEW SUITES&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CHAS&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;33468.48699051&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;32785.67660058&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;7E06EFB3781F029E&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
10        &lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th colspan='2' align='center'&gt;&lt;em&gt;Attributes&lt;/em&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;HCI_CODE&lt;/th&gt; &lt;td&gt;20M0227&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;Appletree Medical Centre&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;LICENCE_TYPE&lt;/th&gt; &lt;td&gt;MC&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;HCI_TEL&lt;/th&gt; &lt;td&gt;64548361&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;POSTAL_CD&lt;/th&gt; &lt;td&gt;560416&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;ADDR_TYPE&lt;/th&gt; &lt;td&gt;A&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BLK_HSE_NO&lt;/th&gt; &lt;td&gt;416&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FLOOR_NO&lt;/th&gt; &lt;td&gt;01&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;UNIT_NO&lt;/th&gt; &lt;td&gt;997&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;STREET_NAME&lt;/th&gt; &lt;td&gt;ANG MO KIO AVENUE 10&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;BUILDING_NAME&lt;/th&gt; &lt;td&gt;TECK GHEE HEARTLANDS&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;CLINIC_PROGRAMME_CODE&lt;/th&gt; &lt;td&gt;CDMP,CHAS,ISP&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;X_COORDINATE&lt;/th&gt; &lt;td&gt;30424.4244873&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;Y_COORDINATE&lt;/th&gt; &lt;td&gt;38509.61595566&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor="#E3E3F3"&gt; &lt;th&gt;INC_CRC&lt;/th&gt; &lt;td&gt;68380F0447C3CEAD&lt;/td&gt; &lt;/tr&gt;&lt;tr bgcolor=""&gt; &lt;th&gt;FMEL_UPD_D&lt;/th&gt; &lt;td&gt;20210926121846&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
                        geometry
1  POINT Z (103.6784 1.325618 0)
2  POINT Z (103.6265 1.289095 0)
3  POINT Z (103.7957 1.330817 0)
4  POINT Z (103.8709 1.354039 0)
5  POINT Z (103.8539 1.312473 0)
6  POINT Z (103.9316 1.355226 0)
7  POINT Z (103.7982 1.299962 0)
8  POINT Z (103.8459 1.371937 0)
9  POINT Z (103.8825 1.312776 0)
10 POINT Z (103.8551 1.364542 0)</code></pre>
</div>
</div>
<p>We see that the <strong>chassg</strong> data set is of point data type, has XYZ dimension, and CRS is WGS84.</p>
</section>
<section id="other-amenities-hospitals-community-centres-parks" class="level3">
<h3 class="anchored" data-anchor-id="other-amenities-hospitals-community-centres-parks">2.1.5 Other amenities (Hospitals, Community Centres, Parks)</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>other_amenities <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"/Users/binhui-ong/IS415-GAA/Take-home_Ex/Take-home_Ex03/data"</span>,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">layer =</span> <span class="st">"gis_osm_pois_a_free_1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>other_amenities</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 54002 features and 4 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 99.66072 ymin: 0.9760554 xmax: 119.0104 ymax: 7.510638
Geodetic CRS:  WGS 84
First 10 features:
     osm_id code        fclass                 name
1  10085141 2721    attraction  Tukun Batu Feringgi
2   7979589 2204          park      Japanese Garden
3  10590000 2204          park            KLCC Park
4  16892550 2204          park    Fort Canning Park
5  19206050 2501   supermarket                Mydin
6  19207509 2256       stadium     Stadium Malawati
7  19207529 2256       stadium    Stadium Shah Alam
8  19800584 2501   supermarket              Lotus's
9  20066960 2251 sports_centre Shah Alam Cart Track
10 20125866 2084       college                PTPTL
                         geometry
1  MULTIPOLYGON (((100.2353 5....
2  MULTIPOLYGON (((100.3015 5....
3  MULTIPOLYGON (((101.7122 3....
4  MULTIPOLYGON (((103.8439 1....
5  MULTIPOLYGON (((101.5156 3....
6  MULTIPOLYGON (((101.5466 3....
7  MULTIPOLYGON (((101.5452 3....
8  MULTIPOLYGON (((101.5379 3....
9  MULTIPOLYGON (((101.5424 3....
10 MULTIPOLYGON (((101.5427 3....</code></pre>
</div>
</div>
<p>We see that the <strong>other_amenities</strong> data is point data, with dimensions XY and CRS WGS84.</p>
</section>
</section>
<section id="visualization-of-imported-data" class="level2">
<h2 class="anchored" data-anchor-id="visualization-of-imported-data">2.2 Visualization of imported data</h2>
<p>Let’s visualize how it looks like using plot() and st_geometry() from the <strong>sf</strong> package.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mpsz2019))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/mpsz2019.png" class="img-fluid"></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(eldercare_services))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/eldercare_services.png" class="img-fluid"></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(gardensg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/gardensg.png" class="img-fluid"></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(chassg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/chassg.png" class="img-fluid"></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(other_amenities))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/other_amenities.png" class="img-fluid"></p>
</section>
<section id="data-pre-processing" class="level2">
<h2 class="anchored" data-anchor-id="data-pre-processing">2.3 Data Pre-Processing</h2>
<section id="dropping-z-dimension" class="level3">
<h3 class="anchored" data-anchor-id="dropping-z-dimension">2.3.1 Dropping Z-dimension</h3>
<p>Earlier, we established that <strong>mpsz</strong>, <strong>gardens</strong> and <strong>chassg</strong> contain the Z-dimension.</p>
<p>To remove the Z-dimension which would potentially hinder our analysis, we can use st_zm() from <strong>sf</strong> package as shown in the codes below.</p>
<p>For mpsz2019,</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">st_zm</span>(mpsz2019)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For gardens,</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>gardens <span class="ot">&lt;-</span> <span class="fu">st_zm</span>(gardensg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For chassg,</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>chas_sg <span class="ot">&lt;-</span> <span class="fu">st_zm</span>(chassg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="resolving-invalid-geometries" class="level3">
<h3 class="anchored" data-anchor-id="resolving-invalid-geometries">2.3.2 Resolving invalid geometries</h3>
<p>To check for invalid geometries, we can apply the following codes.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(mpsz) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(eldercare_services) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(gardens) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(chas_sg) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(other_amenities) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Among all of the geospatial data, only mpsz has invalid geometries. To resolve the invalid geometry, we use st_make_valid() from <strong>sf</strong> package as shown in the code below.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">st_make_valid</span>(mpsz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now, let’s check the result.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(mpsz) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Nice, all our geospatial data consist of fully valid geometries now!</p>
</section>
<section id="handling-missing-values" class="level3">
<h3 class="anchored" data-anchor-id="handling-missing-values">2.2.3 Handling missing values</h3>
<p>Here, we can apply the following codes to check for missing values in our data sets.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>mpsz[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(mpsz)) <span class="sc">!=</span> <span class="dv">0</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 2 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Geodetic CRS:  WGS 84
[1] Name        Description geometry   
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>eldercare_services[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(eldercare_services)) <span class="sc">!=</span> <span class="dv">0</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 133 features and 18 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 14481.92 ymin: 28218.43 xmax: 41665.14 ymax: 46804.9
Projected CRS: SVY21
First 10 features:
   OBJECTID ADDRESSBLO ADDRESSBUI ADDRESSPOS
1         1       &lt;NA&gt;       &lt;NA&gt;     601318
2         2       &lt;NA&gt;       &lt;NA&gt;     462509
3         3       &lt;NA&gt;       &lt;NA&gt;     640190
4         4       &lt;NA&gt;       &lt;NA&gt;     190005
5         5       &lt;NA&gt;       &lt;NA&gt;     160044
6         6       &lt;NA&gt;       &lt;NA&gt;     160117
7         7       &lt;NA&gt;       &lt;NA&gt;     523499
8         8       &lt;NA&gt;       &lt;NA&gt;     731569
9         9       &lt;NA&gt;       &lt;NA&gt;     651210
10       10       &lt;NA&gt;       &lt;NA&gt;     540182
                              ADDRESSSTR ADDRESSTYP DESCRIPTIO HYPERLINK
1      318A Jurong East Avenue 1 #02-308       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
2  Blk 509B Bedok North Street 3 #02-157       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
3         Blk 190 Boon Lay Drive #01-242       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
4                    5 Beach Rd #02-4943       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
5             Blk 44 Beo Crescent #01-67       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
6     Blk 117 Jalan Bukit Merah #01-1683       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
7            499C Tampines Ave 9 #01-256       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
8              569A Champion Way #01-346       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
9         210A Bukit Batok St 21 #01-294       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
10   Blk 182 Rivervale Crescent\n#01-311       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;
   LANDXADDRE LANDYADDRE
1           0          0
2           0          0
3           0          0
4           0          0
5           0          0
6           0          0
7           0          0
8           0          0
9           0          0
10          0          0
                                                           NAME PHOTOURL
1                                  Yuhua Senior Activity Centre     &lt;NA&gt;
2                                          THK SAC @ Kaki Bukit     &lt;NA&gt;
3                                            THK SAC @ Boon Lay     &lt;NA&gt;
4                        PEACE-Connect Senior Activity Centre@5     &lt;NA&gt;
5                                        THK SAC @ Beo Crescent     &lt;NA&gt;
6                                      Silver ACE @ Bukit Merah     &lt;NA&gt;
7  Lions Befrienders Senior Activity Centre @ Tampines Blk 499C     &lt;NA&gt;
8                    Care Corner Senior Activity Centre (WL569)     &lt;NA&gt;
9           Fei Yue Senior Activity Centre (Bukit Batok Branch)     &lt;NA&gt;
10       COMNET Senior Activity Centre @ 182 Rivervale Crescent     &lt;NA&gt;
   ADDRESSFLO          INC_CRC FMEL_UPD_D ADDRESSUNI   X_ADDR   Y_ADDR
1        &lt;NA&gt; 2B0DB92FDD914FFC 2016-07-28       &lt;NA&gt; 16614.08 36639.12
2        &lt;NA&gt; 82728FA30612F3FD 2016-07-28       &lt;NA&gt; 38803.81 35098.78
3        &lt;NA&gt; DE7A8D4EA0BD1D9B 2016-07-28       &lt;NA&gt; 14481.92 36357.61
4        &lt;NA&gt; A2C058FC5785F7FE 2016-07-28       &lt;NA&gt; 31505.35 31853.52
5        &lt;NA&gt; 9DBFD51E056AEE70 2016-07-28       &lt;NA&gt; 27218.35 30135.49
6        &lt;NA&gt; 169DABA5B6ECEA87 2016-07-28       &lt;NA&gt; 27278.94 29350.17
7        &lt;NA&gt; 5DB6B9F0BF276F6D 2016-07-28       &lt;NA&gt; 41665.14 37956.92
8        &lt;NA&gt; 4DC6800E9BB385BE 2016-07-28       &lt;NA&gt; 23147.94 45761.17
9        &lt;NA&gt; EFBD712DA5DD6FEC 2016-07-28       &lt;NA&gt; 18820.58 36396.32
10       &lt;NA&gt; 6BB0D7698D7B4C7D 2016-07-28       &lt;NA&gt; 36446.37 41376.90
                    geometry
1  POINT (16614.08 36639.12)
2  POINT (38803.81 35098.78)
3  POINT (14481.92 36357.61)
4  POINT (31505.35 31853.52)
5  POINT (27218.35 30135.49)
6  POINT (27278.94 29350.17)
7  POINT (41665.14 37956.92)
8  POINT (23147.94 45761.17)
9  POINT (18820.58 36396.32)
10  POINT (36446.37 41376.9)</code></pre>
</div>
</div>
<p>Seems like <strong>eldercare_services</strong> contain missing values in all rows, likely attributed to certain columns that consist of fully NA values. Let’s focus on checking only the relevant columns, NAME and geometry.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>eldercare_services[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(eldercare_services <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">11</span>,<span class="dv">19</span>))) <span class="sc">!=</span> <span class="dv">0</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 18 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Projected CRS: SVY21
 [1] OBJECTID   ADDRESSBLO ADDRESSBUI ADDRESSPOS ADDRESSSTR ADDRESSTYP
 [7] DESCRIPTIO HYPERLINK  LANDXADDRE LANDYADDRE NAME       PHOTOURL  
[13] ADDRESSFLO INC_CRC    FMEL_UPD_D ADDRESSUNI X_ADDR     Y_ADDR    
[19] geometry  
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>Yay, they seem to be alright!</p>
<p>Then, we continue checking the other data sets.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>gardens[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(gardens)) <span class="sc">!=</span> <span class="dv">0</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 2 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Geodetic CRS:  WGS 84
[1] Name        Description geometry   
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>chas_sg[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(chas_sg)) <span class="sc">!=</span> <span class="dv">0</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 2 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Geodetic CRS:  WGS 84
[1] Name        Description geometry   
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>other_amenities[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(other_amenities)) <span class="sc">!=</span> <span class="dv">0</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 29715 features and 4 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 99.66072 ymin: 1.013643 xmax: 119.0104 ymax: 7.253331
Geodetic CRS:  WGS 84
First 10 features:
     osm_id code     fclass name                       geometry
13 20126093 2084    college &lt;NA&gt; MULTIPOLYGON (((101.5421 3....
15 20505251 2204       park &lt;NA&gt; MULTIPOLYGON (((101.5582 3....
16 21281773 2205 playground &lt;NA&gt; MULTIPOLYGON (((101.5577 3....
19 22945204 2306 food_court &lt;NA&gt; MULTIPOLYGON (((101.7946 2....
20 22998331 2256    stadium &lt;NA&gt; MULTIPOLYGON (((101.5466 3....
25 23033750 2204       park &lt;NA&gt; MULTIPOLYGON (((101.5195 3....
28 23036984 2204       park &lt;NA&gt; MULTIPOLYGON (((101.5379 3....
29 23037034 2204       park &lt;NA&gt; MULTIPOLYGON (((101.5467 3....
34 23043243 2204       park &lt;NA&gt; MULTIPOLYGON (((101.507 3.0...
41 23046326 2252      pitch &lt;NA&gt; MULTIPOLYGON (((101.5028 3....</code></pre>
</div>
</div>
<p>Similarly, <strong>other_amenities</strong> contain NA values in many rows. From the output, we can attribute it to the name column. Let’s exclude the name column in our check:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>other_amenities[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(other_amenities <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>name))) <span class="sc">!=</span> <span class="dv">0</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 4 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Geodetic CRS:  WGS 84
[1] osm_id   code     fclass   name     geometry
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>Excluding the name column, which is not very important for our analysis, we can conclude that there is no other missing values.</p>
<p>We’re done with handling the missing values in our geospatial data!</p>
</section>
<section id="changing-and-verifying-crs" class="level3">
<h3 class="anchored" data-anchor-id="changing-and-verifying-crs">2.3.4 Changing and verifying CRS</h3>
<p>It is very important to ensure our geospatial data is in the appropriate and common CRS. To check for crs of each data set, we can use st_crs() from <strong>sf</strong> package.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(mpsz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<p>The <strong>mpsz</strong> data set is not in our desired coordinate system (SVY21; EPSG: 3414). Hence, we need to reproject it.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(eldercare_services)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: SVY21 
  wkt:
PROJCRS["SVY21",
    BASEGEOGCRS["SVY21[WGS84]",
        DATUM["World Geodetic System 1984",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]],
            ID["EPSG",6326]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["Degree",0.0174532925199433]]],
    CONVERSION["unnamed",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",1.36666666666667,
            ANGLEUNIT["Degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",103.833333333333,
            ANGLEUNIT["Degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",1,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",28001.642,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",38744.572,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["(E)",east,
            ORDER[1],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]],
        AXIS["(N)",north,
            ORDER[2],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]]]</code></pre>
</div>
</div>
<p>The <strong>eldercare_services</strong> data set does not have the correct EPSG code (3414). Hence, we must reassign the EPSG code to it.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(gardens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(chas_sg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(other_amenities)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["latitude",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["longitude",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<p>The <strong>garden</strong>, <strong>chas_sg</strong> and <strong>other_amenities</strong> data sets are also not in our desired coordinate system (SVY21; EPSG: 3414). Hence, we need to reproject them too.</p>
<p>To reproject data sets from one CRS to another CRS, we apply st_transform() from <strong>sf</strong> package as shown in the following three code chunks.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>mpszsg <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(mpsz, <span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>garden <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(gardens, <span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>chas <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(chas_sg, <span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>others <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(other_amenities, <span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For <strong>eldercare_services</strong>, we should assign the correct EPSG code using st_set_crs() from <strong>sf</strong> package instead.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>eldercare <span class="ot">&lt;-</span> <span class="fu">st_set_crs</span>(eldercare_services, <span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="extraction-of-relevant-columns" class="level3">
<h3 class="anchored" data-anchor-id="extraction-of-relevant-columns">2.3.6 Extraction of relevant columns</h3>
<section id="extraction-of-subzone-and-planning-area-names-in-mpsz_sf" class="level4">
<h4 class="anchored" data-anchor-id="extraction-of-subzone-and-planning-area-names-in-mpsz_sf">2.3.6.1 Extraction of subzone and planning area names in mpsz_sf</h4>
<p>Currently, our <strong>mpsz_sg</strong> data is pretty messy. The subzone and planning area names are hidden in the Description field. To extract them, we should follow the codes below.</p>
<p>For subzone:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>mpszsg <span class="ot">&lt;-</span> mpszsg <span class="sc">%&gt;%</span>  </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SUBZONE=</span> <span class="fu">str_extract</span>(<span class="st">`</span><span class="at">Description</span><span class="st">`</span>, <span class="st">"&lt;th&gt;SUBZONE_N&lt;/th&gt; &lt;td&gt;(.*?)&lt;/td&gt;"</span>)) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>mpszsg<span class="sc">$</span>SUBZONE <span class="ot">&lt;-</span> <span class="fu">str_remove_all</span>(mpszsg<span class="sc">$</span>SUBZONE, <span class="st">"&lt;.*?&gt;|SUBZONE_N"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>mpszsg<span class="sc">$</span>SUBZONE <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(mpszsg<span class="sc">$</span>SUBZONE, <span class="st">"^</span><span class="sc">\\</span><span class="st">s+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For planning area:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>mpszsg <span class="ot">&lt;-</span> mpszsg <span class="sc">%&gt;%</span>  </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PLAN_AREA=</span> <span class="fu">str_extract</span>(<span class="st">`</span><span class="at">Description</span><span class="st">`</span>, <span class="st">"&lt;th&gt;PLN_AREA_N&lt;/th&gt; &lt;td&gt;(.*?)&lt;/td&gt;"</span>)) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>mpszsg<span class="sc">$</span>PLAN_AREA <span class="ot">&lt;-</span> <span class="fu">str_remove_all</span>(mpszsg<span class="sc">$</span>PLAN_AREA, <span class="st">"&lt;.*?&gt;|PLN_AREA_N"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>mpszsg<span class="sc">$</span>PLAN_AREA <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(mpszsg<span class="sc">$</span>PLAN_AREA, <span class="st">"^</span><span class="sc">\\</span><span class="st">s+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpszsg, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 10 features and 4 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 24431.8 ymin: 28515.07 xmax: 31146.33 ymax: 30069.41
Projected CRS: SVY21 / Singapore TM
# A tibble: 10 × 5
   Name   Description                                 geometry SUBZONE PLAN_AREA
   &lt;chr&gt;  &lt;chr&gt;                             &lt;MULTIPOLYGON [m]&gt; &lt;chr&gt;   &lt;chr&gt;    
 1 kml_1  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((25910.34 29425.34, 26… DEPOT … BUKIT ME…
 2 kml_2  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((26750.09 29216.1, 267… BUKIT … BUKIT ME…
 3 kml_3  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((29161.2 29723.07, 291… CHINAT… OUTRAM   
 4 kml_4  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((29814.11 29616.89, 29… PHILLIP DOWNTOWN…
 5 kml_5  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((30137.77 29843.19, 30… RAFFLE… DOWNTOWN…
 6 kml_6  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((29699.44 29417.6, 296… CHINA … OUTRAM   
 7 kml_7  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((27748.04 29953.49, 27… TIONG … BUKIT ME…
 8 kml_8  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((30844.87 29021.96, 30… BAYFRO… DOWNTOWN…
 9 kml_9  "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((27444.04 29961.41, 27… TIONG … BUKIT ME…
10 kml_10 "&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;th c… (((30436.73 29517.49, 30… CLIFFO… DOWNTOWN…</code></pre>
</div>
</div>
</section>
<section id="extraction-of-chas-clinic-names-in-chas" class="level4">
<h4 class="anchored" data-anchor-id="extraction-of-chas-clinic-names-in-chas">2.3.6.2 Extraction of CHAS clinic names in chas</h4>
<p>Similarly, the <strong>chas</strong> data set has the clinic names hidden in the Description field. We apply the same steps as shown below to extract the clinic names.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>chas <span class="ot">&lt;-</span> chas <span class="sc">%&gt;%</span>  </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NAME=</span> <span class="fu">str_extract</span>(<span class="st">`</span><span class="at">Description</span><span class="st">`</span>, <span class="st">"&lt;th&gt;HCI_NAME&lt;/th&gt; &lt;td&gt;(.*?)&lt;/td&gt;"</span>)) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>chas<span class="sc">$</span>NAME <span class="ot">&lt;-</span> <span class="fu">str_remove_all</span>(chas<span class="sc">$</span>NAME, <span class="st">"&lt;.*?&gt;|HCI_NAME|"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>chas<span class="sc">$</span>NAME <span class="ot">&lt;-</span> <span class="fu">str_remove_all</span>(chas<span class="sc">$</span>NAME, <span class="st">"^</span><span class="sc">\\</span><span class="st">s+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="extracting-columns" class="level4">
<h4 class="anchored" data-anchor-id="extracting-columns">2.3.6.2 Extracting columns</h4>
<p>To simplify our analysis and speed up our computation, we should only retain relevant fields in our data sets. Hence, we use select() from <strong>dplyr</strong> package to select the fields that we want to keep.</p>
<p><strong>mpsz</strong>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>mpszsg <span class="ot">&lt;-</span> mpszsg <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>eldercare</strong>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>eldercare <span class="ot">&lt;-</span> eldercare <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">11</span>,<span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>eldercare</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 133 features and 1 field
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 14481.92 ymin: 28218.43 xmax: 41665.14 ymax: 46804.9
Projected CRS: SVY21 / Singapore TM
First 10 features:
                                                           NAME
1                                  Yuhua Senior Activity Centre
2                                          THK SAC @ Kaki Bukit
3                                            THK SAC @ Boon Lay
4                        PEACE-Connect Senior Activity Centre@5
5                                        THK SAC @ Beo Crescent
6                                      Silver ACE @ Bukit Merah
7  Lions Befrienders Senior Activity Centre @ Tampines Blk 499C
8                    Care Corner Senior Activity Centre (WL569)
9           Fei Yue Senior Activity Centre (Bukit Batok Branch)
10       COMNET Senior Activity Centre @ 182 Rivervale Crescent
                    geometry
1  POINT (16614.08 36639.12)
2  POINT (38803.81 35098.78)
3  POINT (14481.92 36357.61)
4  POINT (31505.35 31853.52)
5  POINT (27218.35 30135.49)
6  POINT (27278.94 29350.17)
7  POINT (41665.14 37956.92)
8  POINT (23147.94 45761.17)
9  POINT (18820.58 36396.32)
10  POINT (36446.37 41376.9)</code></pre>
</div>
</div>
<p><strong>chas</strong>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>chas <span class="ot">&lt;-</span> chas <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">3</span>,<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>chas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 645 features and 1 field
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 11234.32 ymin: 27388.9 xmax: 45333 ymax: 48380.51
Projected CRS: SVY21 / Singapore TM
# A tibble: 645 × 2
              geometry NAME                                         
           &lt;POINT [m]&gt; &lt;chr&gt;                                        
 1 (32176.99 37348.35) Affinity Medical Clinic                      
 2 (39037.12 34234.33) BEDOK  CENTRAL CLINIC                        
 3  (39378.86 33601.1) BEDOK CLINIC &amp; SURGERY(Family Medical Centre)
 4  (22295.64 46626.1) ACUMED MEDICAL GROUP                         
 5 (27353.89 30162.99) Beo Crescent Clinic &amp; Surgery                
 6 (33064.94 35041.76) G.I.F.T MEDICAL CENTRE                       
 7 (34620.42 42646.27) DR JOYCE &amp; PARTNERS FAMILY CLINIC            
 8 (29101.85 33647.61) DR LIM LEAN HUAT &amp; ASSOCIATES PTE LTD        
 9 (28449.68 31527.59) DTAP @ Somerset                              
10  (25843.11 47551.7) DUXTON MEDICAL CLINIC CANBERRA               
# ℹ 635 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="extraction-of-study-area" class="level3">
<h3 class="anchored" data-anchor-id="extraction-of-study-area">2.3.7 Extraction of study area</h3>
<section id="extracting-singapore-main-island-boundaries-from-mpszsg-data-set" class="level4">
<h4 class="anchored" data-anchor-id="extracting-singapore-main-island-boundaries-from-mpszsg-data-set">2.3.7.1 Extracting Singapore main island boundaries from mpszsg data set</h4>
<p>Let’s take a look at our <strong>mpszsg</strong> data set.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mpszsg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/mpszsg.png" class="img-fluid"></p>
<p>From the above, we can see that the data set contains geometries of the outer islands of Singapore. In our research, however, we do not need these data as we are focusing on the main island of Singapore.</p>
<p>Hence, to see which what kind of islands there are contained in the data set, we can take a look at what plan areas there are using unique().</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(mpszsg<span class="sc">$</span>PLAN_AREA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "BUKIT MERAH"             "OUTRAM"                 
 [3] "DOWNTOWN CORE"           "MARINA SOUTH"           
 [5] "MARINA EAST"             "RIVER VALLEY"           
 [7] "SINGAPORE RIVER"         "WESTERN ISLANDS"        
 [9] "MUSEUM"                  "QUEENSTOWN"             
[11] "MARINE PARADE"           "SOUTHERN ISLANDS"       
[13] "STRAITS VIEW"            "ROCHOR"                 
[15] "TANGLIN"                 "NEWTON"                 
[17] "CLEMENTI"                "BEDOK"                  
[19] "PIONEER"                 "JURONG EAST"            
[21] "KALLANG"                 "ORCHARD"                
[23] "GEYLANG"                 "TOA PAYOH"              
[25] "BUKIT TIMAH"             "TUAS"                   
[27] "JURONG WEST"             "ANG MO KIO"             
[29] "SERANGOON"               "TENGAH"                 
[31] "BOON LAY"                "NOVENA"                 
[33] "TAMPINES"                "HOUGANG"                
[35] "CHANGI BAY"              "PAYA LEBAR"             
[37] "BUKIT BATOK"             "PASIR RIS"              
[39] "BUKIT PANJANG"           "CHOA CHU KANG"          
[41] "BISHAN"                  "YISHUN"                 
[43] "PUNGGOL"                 "MANDAI"                 
[45] "CHANGI"                  "SENGKANG"               
[47] "SELETAR"                 "SUNGEI KADUT"           
[49] "WOODLANDS"               "SEMBAWANG"              
[51] "WESTERN WATER CATCHMENT" "CENTRAL WATER CATCHMENT"
[53] "SIMPANG"                 "LIM CHU KANG"           
[55] "NORTH-EASTERN ISLANDS"  </code></pre>
</div>
</div>
<p>From here, we can see that the outer islands are classified as ” NORTH-EASTERN ISLANDS”, ” WESTERN ISLANDS”, ” SOUTHERN ISLANDS” under PLAN_AREA. All other plan areas are in or connected to the main island of Singapore.</p>
<p>To remove these islands from our data set, we can use filter() from the <strong>dplyr</strong> package and apply the following code chunk, removing records that contain the string “ISLANDS” in the PLAN_AREA column.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>mpsz_sf <span class="ot">&lt;-</span> mpszsg <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(PLAN_AREA, <span class="st">"ISLANDS"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mpsz_sf))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/mpsz_sf.png" class="img-fluid"></p>
<p>Then, to get the boundaries of Singapore main island,</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>sgboundary_sf <span class="ot">&lt;-</span> mpsz_sf <span class="sc">%&gt;%</span> st_union</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(sgboundary_sf))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/sgboundary_sf.png" class="img-fluid"></p>
</section>
<section id="extracting-singapore-data-from-chas-data-set" class="level4">
<h4 class="anchored" data-anchor-id="extracting-singapore-data-from-chas-data-set">2.2.7.2 Extracting Singapore data from chas data set</h4>
<p>From our understanding, <strong>chas</strong> data set contains one data point at one of Singapore’s outer islands. Hence, we want to extract rows that contain only data within Singapore main island. To do so, we use the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>chas <span class="ot">&lt;-</span> chas[<span class="fu">unlist</span>(<span class="fu">st_contains</span>(sgboundary_sf, chas)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s take a look at our extracted chas data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(chas))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/chas.png" class="img-fluid"></p>
</section>
<section id="extracting-singapore-data-from-others-data-set" class="level4">
<h4 class="anchored" data-anchor-id="extracting-singapore-data-from-others-data-set">2.2.7.2 Extracting Singapore data from others data set</h4>
<p>From our understanding, <strong>others</strong> data set contains the data of other neighbouring countries and islands outside of Singapore main island. Hence, we want to extract rows that contain only data within Singapore main island. To do so, we use the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>amenities <span class="ot">&lt;-</span> others[<span class="fu">unlist</span>(<span class="fu">st_contains</span>(sgboundary_sf, others)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Here, we check whether we have achieved our desired result for <strong>amenities</strong>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(amenities))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/amenities.png" class="img-fluid"></p>
<p>We’ve successfully extracted them!</p>
</section>
<section id="checking-of-geospatial-data-sets" class="level4">
<h4 class="anchored" data-anchor-id="checking-of-geospatial-data-sets">2.3.7.3 Checking of geospatial data sets</h4>
<p>To confirm that all records in our <strong>eldercare</strong> and <strong>garden</strong> data sets are within the boundaries of Singapore main island, we can apply the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>eldercare[<span class="sc">!</span><span class="fu">unlist</span>(<span class="fu">st_contains</span>(sgboundary_sf, eldercare)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 1 field
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Projected CRS: SVY21 / Singapore TM
[1] NAME     geometry
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>garden[<span class="sc">!</span><span class="fu">unlist</span>(<span class="fu">st_contains</span>(sgboundary_sf, garden)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 2 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Projected CRS: SVY21 / Singapore TM
[1] Name        Description geometry   
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>In the above codes, we are checking for <strong>eldercare</strong> and <strong>garden</strong> records that are not contained by <strong>sgboundary_sf</strong>.</p>
<p>Since the results return 0 row for both data sets, we are certain these data sets are confined to within Singapore’s main island.</p>
</section>
</section>
</section>
<section id="extracting-types-of-other-amenities" class="level2">
<h2 class="anchored" data-anchor-id="extracting-types-of-other-amenities">2.4 Extracting types of other amenities</h2>
<p>The <strong>amenities</strong> data set consists of different types of amenities recorded in different rows. To extract each of them (hospital, community centres, parks), we apply the codes below.</p>
<p>Hospital:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>hospital <span class="ot">&lt;-</span> amenities <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fclass <span class="sc">==</span> <span class="st">"hospital"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Community Centre:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>communitycentre <span class="ot">&lt;-</span> amenities <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fclass <span class="sc">==</span> <span class="st">"community_centre"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Park:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>park <span class="ot">&lt;-</span> amenities <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fclass <span class="sc">==</span> <span class="st">"park"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="inserting-capacity-columns-into-facilities-data-frames" class="level2">
<h2 class="anchored" data-anchor-id="inserting-capacity-columns-into-facilities-data-frames">2.5 Inserting capacity columns into facilities data frames</h2>
<p>For our accessibility analysis, we would need the capacity (supply) of each facility.</p>
<p>For <strong>eldercare</strong>, we use an estimated capacity of 100, implying that each eldercare centre can hold 100 elderly people at any point of time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>eldercare <span class="ot">&lt;-</span> eldercare <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">capacity =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Community gardens are not very big, occupying a small land space within estates. Hence, we use an estimated capacity of 15, implying that each community garden can hold 25 elderly people at any point of time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>garden <span class="ot">&lt;-</span> garden <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">capacity =</span> <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Most general practitioner clinics in Singapore are also small in scale. Hence, we assume that each of them can hold 15 elderly people each time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>chas <span class="ot">&lt;-</span> chas <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">capacity=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Hospitals in Singapore has varying capacity. Based on various articles, such as this, we estimate that each hospital can hold about <a href="https://www.skh.com.sg/news/announcements/sengkang-general-and-community-hospitals-open-their-doors-to-serve-the-northeast-community">1000</a> elderly people at any point of time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>hospital <span class="ot">&lt;-</span> hospital <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">capacity=</span><span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Community centres occupy a significant land area, holding many activities for the entire neighbourhood. Hence, we estimate that it can hold about 1000 elderly at any point in time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>communitycentre <span class="ot">&lt;-</span> communitycentre <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">capacity =</span> <span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Most parks in Singapore are quite big and can hold approximately 500 elderly at any point in time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>park <span class="ot">&lt;-</span> park <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">capacity =</span> <span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="data-preparation-aspatial-data" class="level1">
<h1>3 Data Preparation (Aspatial Data)</h1>
<p>The first step to dealing with our aspatial data is to import it into our R environment. To do so, we can use read_csv() from the <strong>readr</strong> package.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>residents <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/respopagesextod2023.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We take a look at the residents data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(residents)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 100,928
Columns: 7
$ PA   &lt;chr&gt; "Ang Mo Kio", "Ang Mo Kio", "Ang Mo Kio", "Ang Mo Kio", "Ang Mo K…
$ SZ   &lt;chr&gt; "Ang Mo Kio Town Centre", "Ang Mo Kio Town Centre", "Ang Mo Kio T…
$ AG   &lt;chr&gt; "0_to_4", "0_to_4", "0_to_4", "0_to_4", "0_to_4", "0_to_4", "0_to…
$ Sex  &lt;chr&gt; "Males", "Males", "Males", "Males", "Males", "Males", "Males", "M…
$ TOD  &lt;chr&gt; "HDB 1- and 2-Room Flats", "HDB 3-Room Flats", "HDB 4-Room Flats"…
$ Pop  &lt;int&gt; 0, 0, 10, 30, 0, 40, 0, 0, 0, 0, 10, 20, 0, 20, 0, 0, 0, 10, 10, …
$ Time &lt;int&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023,…</code></pre>
</div>
</div>
<p>Since the data has an AG (age) field broken down into several age groups, let’s take a look at how many unique age group classifications there are using the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(residents<span class="sc">$</span>AG)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "0_to_4"      "5_to_9"      "10_to_14"    "15_to_19"    "20_to_24"   
 [6] "25_to_29"    "30_to_34"    "35_to_39"    "40_to_44"    "45_to_49"   
[11] "50_to_54"    "55_to_59"    "60_to_64"    "65_to_69"    "70_to_74"   
[16] "75_to_79"    "80_to_84"    "85_to_89"    "90_and_Over"</code></pre>
</div>
</div>
<p>Then, to extract only rows that contain residents aged 55 and above, and name this new data set as <strong>elderly</strong>, we can apply the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>elderly <span class="ot">&lt;-</span> residents <span class="sc">%&gt;%</span> <span class="fu">filter</span>(AG <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"55_to_59"</span>, <span class="st">"60_to_64"</span>, <span class="st">"65_to_69"</span>, <span class="st">"70_to_74"</span>, <span class="st">"75_to_79"</span>, <span class="st">"80_to_84"</span>, <span class="st">"85_to_89"</span>, <span class="st">"90_and_Over"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, to summarize the number of population size of elderly according to Planning Area and Subzone, we can apply the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>elderly <span class="ot">&lt;-</span> elderly <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PA, SZ) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">sum</span>(Pop))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then, we rename the population size column “sum(Pop)” as ‘demand’. This represents the demand for elderly-related services in each planning area and subzone.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>elderly <span class="ot">&lt;-</span> elderly <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">demand =</span> <span class="st">`</span><span class="at">sum(Pop)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>elderly</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 332 × 3
# Groups:   PA [55]
   PA         SZ                     demand
   &lt;chr&gt;      &lt;chr&gt;                   &lt;int&gt;
 1 Ang Mo Kio Ang Mo Kio Town Centre   1520
 2 Ang Mo Kio Cheng San               10710
 3 Ang Mo Kio Chong Boon              11100
 4 Ang Mo Kio Kebun Bahru              9080
 5 Ang Mo Kio Sembawang Hills          2450
 6 Ang Mo Kio Shangri-La               7020
 7 Ang Mo Kio Tagore                   3070
 8 Ang Mo Kio Townsville               8370
 9 Ang Mo Kio Yio Chu Kang                0
10 Ang Mo Kio Yio Chu Kang East        1490
# ℹ 322 more rows</code></pre>
</div>
</div>
</section>
<section id="joining-geospatial-and-aspatial-data" class="level1">
<h1>4 Joining geospatial and aspatial data</h1>
<p>It’s time to combine the geospatial and aspatial data, using subzone and planning area names.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>mpsz_sf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 326 features and 2 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 2667.538 ymin: 21448.47 xmax: 55941.94 ymax: 50256.33
Projected CRS: SVY21 / Singapore TM
# A tibble: 326 × 3
                                                      geometry SUBZONE PLAN_AREA
 *                                          &lt;MULTIPOLYGON [m]&gt; &lt;chr&gt;   &lt;chr&gt;    
 1 (((25910.34 29425.34, 26265.82 29209.49, 26238.95 29165.57… DEPOT … BUKIT ME…
 2 (((26750.09 29216.1, 26751.91 29173.68, 26762.63 29174.04,… BUKIT … BUKIT ME…
 3 (((29161.2 29723.07, 29189.03 29704.77, 29209.22 29691.86,… CHINAT… OUTRAM   
 4 (((29814.11 29616.89, 29806.68 29593.55, 29786.43 29615.23… PHILLIP DOWNTOWN…
 5 (((30137.77 29843.19, 30138.42 29841.86, 30160.07 29797.29… RAFFLE… DOWNTOWN…
 6 (((29699.44 29417.6, 29692.13 29405.75, 29690.85 29406.46,… CHINA … OUTRAM   
 7 (((27748.04 29953.49, 27826.68 29943.78, 27840.27 29944.76… TIONG … BUKIT ME…
 8 (((30844.87 29021.96, 30794.28 28944.99, 30649.08 29034.1,… BAYFRO… DOWNTOWN…
 9 (((27444.04 29961.41, 27446.8 29808.05, 27566.69 29810.9, … TIONG … BUKIT ME…
10 (((30436.73 29517.49, 30304.36 29415.54, 30214.96 29420.38… CLIFFO… DOWNTOWN…
# ℹ 316 more rows</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>elderly</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 332 × 3
# Groups:   PA [55]
   PA         SZ                     demand
   &lt;chr&gt;      &lt;chr&gt;                   &lt;int&gt;
 1 Ang Mo Kio Ang Mo Kio Town Centre   1520
 2 Ang Mo Kio Cheng San               10710
 3 Ang Mo Kio Chong Boon              11100
 4 Ang Mo Kio Kebun Bahru              9080
 5 Ang Mo Kio Sembawang Hills          2450
 6 Ang Mo Kio Shangri-La               7020
 7 Ang Mo Kio Tagore                   3070
 8 Ang Mo Kio Townsville               8370
 9 Ang Mo Kio Yio Chu Kang                0
10 Ang Mo Kio Yio Chu Kang East        1490
# ℹ 322 more rows</code></pre>
</div>
</div>
<p>From the above, we see that the subzone and planning area values in <strong>elderly</strong> data set are not in full uppercase, while that in <strong>mpsz_sf</strong> data set is in full uppercase. Since R is case sensitive, this would hinder our join.</p>
<p>Hence, we can change the values in <strong>elderly</strong> data set to full uppercase, so that it can match with the values in <strong>mpsz_sf</strong>. To do so, we can use toupper() as shown below.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>elderly<span class="sc">$</span>PA <span class="ot">&lt;-</span> <span class="fu">toupper</span>(elderly<span class="sc">$</span>PA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>elderly<span class="sc">$</span>SZ <span class="ot">&lt;-</span> <span class="fu">toupper</span>(elderly<span class="sc">$</span>SZ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now that we have changed the values to uppercase, we can use left_join() from <strong>dplyr</strong> package to conduct our join, using subzone and planning area values.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>mpsz_demand <span class="ot">&lt;-</span> <span class="fu">left_join</span>(mpsz_sf, elderly, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'SUBZONE'</span> <span class="ot">=</span> <span class="st">'SZ'</span>, <span class="st">'PLAN_AREA'</span> <span class="ot">=</span> <span class="st">'PA'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>mpsz_demand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 326 features and 3 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 2667.538 ymin: 21448.47 xmax: 55941.94 ymax: 50256.33
Projected CRS: SVY21 / Singapore TM
# A tibble: 326 × 4
                                               geometry SUBZONE PLAN_AREA demand
                                     &lt;MULTIPOLYGON [m]&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;int&gt;
 1 (((25910.34 29425.34, 26265.82 29209.49, 26238.95 2… DEPOT … BUKIT ME…   1870
 2 (((26750.09 29216.1, 26751.91 29173.68, 26762.63 29… BUKIT … BUKIT ME…    460
 3 (((29161.2 29723.07, 29189.03 29704.77, 29209.22 29… CHINAT… OUTRAM      3590
 4 (((29814.11 29616.89, 29806.68 29593.55, 29786.43 2… PHILLIP DOWNTOWN…      0
 5 (((30137.77 29843.19, 30138.42 29841.86, 30160.07 2… RAFFLE… DOWNTOWN…      0
 6 (((29699.44 29417.6, 29692.13 29405.75, 29690.85 29… CHINA … OUTRAM       680
 7 (((27748.04 29953.49, 27826.68 29943.78, 27840.27 2… TIONG … BUKIT ME…   4090
 8 (((30844.87 29021.96, 30794.28 28944.99, 30649.08 2… BAYFRO… DOWNTOWN…      0
 9 (((27444.04 29961.41, 27446.8 29808.05, 27566.69 29… TIONG … BUKIT ME…   5140
10 (((30436.73 29517.49, 30304.36 29415.54, 30214.96 2… CLIFFO… DOWNTOWN…      0
# ℹ 316 more rows</code></pre>
</div>
</div>
<p>We’ve successfully combined our data! Now, we can easily map the demand of each region geometrically for analysis later.</p>
</section>
<section id="creating-hexagon-data" class="level1">
<h1>5 Creating hexagon data</h1>
<p>Accessibility analysis can be done with hexagon data as individual subzones might be too large. In this section, we will create hexagon data.</p>
<section id="making-a-hexagon-object" class="level2">
<h2 class="anchored" data-anchor-id="making-a-hexagon-object">5.1 Making a hexagon object</h2>
<p>To make a hexagon object, we use st_make_grid() from <strong>sf</strong> package.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>hexagons <span class="ot">&lt;-</span> <span class="fu">st_make_grid</span>(mpsz_sf, <span class="at">cellsize =</span> <span class="dv">250</span>, <span class="at">what =</span> <span class="st">"polygons"</span>, <span class="at">square =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In the above code, we set</p>
<ul>
<li><p>cellsize = 250, such that distance between opposite edges is 250m</p></li>
<li><p>what = “polygons” to create polygons</p></li>
<li><p>square = FALSE to create hexagonal grid instead of square grid</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(hexagons))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/hexagons.png" class="img-fluid"></p>
</section>
<section id="deriving-hexagon-of-singapore-main-island" class="level2">
<h2 class="anchored" data-anchor-id="deriving-hexagon-of-singapore-main-island">5.2 Deriving hexagon of Singapore main island</h2>
<p>To get the hexagon of Singapore main island,</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>hexagon <span class="ot">&lt;-</span> hexagons <span class="sc">%&gt;%</span> <span class="fu">st_intersection</span>(mpsz_sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(hexagon))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/hexagon.png" class="img-fluid"></p>
</section>
<section id="inserting-attributes-into-hexagon" class="level2">
<h2 class="anchored" data-anchor-id="inserting-attributes-into-hexagon">5.3 Inserting attributes into hexagon</h2>
<p><strong>Step 1: Converting hexagon into sf object</strong></p>
<p>We can use glimpse() to gain an understanding of the structure of hexagon.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(hexagon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>sfc_GEOMETRY of length 17370; first list element: List of 1
 $ : num [1:7, 1:2] 24535 24534 24533 24514 24506 ...
 - attr(*, "class")= chr [1:3] "XY" "POLYGON" "sfg"</code></pre>
</div>
</div>
<p>Alternatively, we can use class() to determine the object class of hexagon.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(hexagon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sfc_GEOMETRY" "sfc"         </code></pre>
</div>
</div>
<p>From the results, we see that hexagon is in sfc class. To convert it into an sf object for easier manipulation, we can use st_sf() from <strong>sf</strong> as shown in the following code, and name the new sf object as <strong>hexagon_sf</strong>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>hexagon_sf <span class="ot">&lt;-</span> hexagon <span class="sc">%&gt;%</span> <span class="fu">st_sf</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(hexagon_sf,<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 10 features and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 24431.8 ymin: 29242.98 xmax: 25292.54 ymax: 29615.08
Projected CRS: SVY21 / Singapore TM
                         geometry
1  POLYGON ((24535.05 29319.2,...
2  POLYGON ((24542.54 29603.55...
3  POLYGON ((24500.44 29339.18...
4  POLYGON ((24667.54 29387.04...
5  POLYGON ((24542.54 29603.55...
6  POLYGON ((24667.54 29387.04...
7  POLYGON ((24917.54 29387.04...
8  POLYGON ((24812.04 29592.29...
9  POLYGON ((24917.54 29387.04...
10 POLYGON ((25167.54 29387.04...</code></pre>
</div>
</div>
<p><strong>Step 2: Inserting planning area and subzone names</strong></p>
<p>Here, we use st_join() and st_overlaps() from <strong>sf</strong> package to combine the aggregated demand for each subzone into the <strong>hexagon_sf</strong> data frame.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>hex <span class="ot">&lt;-</span> <span class="fu">st_join</span>(hexagon_sf, mpsz_demand, st_overlaps)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>st_overlaps() allows us to join <strong>mpsz_demand</strong> to <strong>hexagon_sf</strong> as long as there is an area of overlap, including cases where geometries share boundaries or overlap partially.</p>
<p>Since many hexagons can make up a single subzone, and the current demand field in the hexagon_demand represents the demand for one entire subzone, we have to divide the aggregated demand across the different hexagons in each subzone.</p>
<p>To do so, we first find out the count of hexagons contained in each subzone by using the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>hex_count <span class="ot">&lt;-</span> <span class="fu">st_drop_geometry</span>(hex) <span class="sc">%&gt;%</span> <span class="fu">count</span>(SUBZONE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then, we use left_join() from <strong>dplyr</strong> to include the total number of hexagons sharing the same subzone as the hexagon of that row.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>hex_demand_sf <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hex, hex_count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>hex_demand_sf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 24023 features and 4 fields
Geometry type: GEOMETRY
Dimension:     XY
Bounding box:  xmin: 2667.538 ymin: 21448.47 xmax: 55941.94 ymax: 50256.33
Projected CRS: SVY21 / Singapore TM
First 10 features:
               SUBZONE   PLAN_AREA demand  n                       geometry
1           DEPOT ROAD BUKIT MERAH   1870 34 POLYGON ((24535.05 29319.2,...
2           KENT RIDGE  QUEENSTOWN      0 56 POLYGON ((24535.05 29319.2,...
3           DEPOT ROAD BUKIT MERAH   1870 34 POLYGON ((24542.54 29603.55...
4           KENT RIDGE  QUEENSTOWN      0 56 POLYGON ((24542.54 29603.55...
5           DEPOT ROAD BUKIT MERAH   1870 34 POLYGON ((24500.44 29339.18...
6           KENT RIDGE  QUEENSTOWN      0 56 POLYGON ((24500.44 29339.18...
7           DEPOT ROAD BUKIT MERAH   1870 34 POLYGON ((24667.54 29387.04...
8  TELOK BLANGAH DRIVE BUKIT MERAH   6500 44 POLYGON ((24667.54 29387.04...
9           DEPOT ROAD BUKIT MERAH   1870 34 POLYGON ((24542.54 29603.55...
10      ALEXANDRA HILL BUKIT MERAH   5790 38 POLYGON ((24542.54 29603.55...</code></pre>
</div>
</div>
<p>Next, we divide the aggregated demand by the number of hexagons sharing the same subzone. The new field, hexagon_demand, indicates the average demand of the particular hexagon.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>hex_sf <span class="ot">&lt;-</span> hex_demand_sf <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">hexagon_demand =</span> <span class="fu">ceiling</span>(demand<span class="sc">/</span>n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="preparing-distance-matrix" class="level1">
<h1>6 Preparing Distance Matrix</h1>
<p>We need the distance matrix between the residential areas (reflected in <strong>mpsz_demand</strong>) and each facility to determine the accessibility to the latter.</p>
<p>To do so, we have to apply the steps in the following sections.</p>
<section id="convert-from-sf-data.table-to-spatialpolygonsdataframe" class="level3">
<h3 class="anchored" data-anchor-id="convert-from-sf-data.table-to-spatialpolygonsdataframe">6.1.1 Convert from sf data.table to SpatialPolygonsDataFrame</h3>
<p>We can use data in sf format to prepare distance matrix. However, there has been empirical evidence that it is too computationally intensive, and that sp format is a better choice computationally. Hence, we convert our sf data sets into sp objects.</p>
<section id="hex_sf" class="level4">
<h4 class="anchored" data-anchor-id="hex_sf">6.1.1.1 hex_sf</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>hex_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(hex_sf, <span class="st">"Spatial"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>hex_sp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>class       : SpatialPolygonsDataFrame 
features    : 24023 
extent      : 2667.538, 55941.94, 21448.47, 50256.33  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 5
names       :   SUBZONE,  PLAN_AREA, demand,     n, hexagon_demand 
min values  : ADMIRALTY, ANG MO KIO,      0,     9,              0 
max values  :    YUNNAN,     YISHUN,  45870, 10336,            638 </code></pre>
</div>
</div>
</section>
<section id="eldercare-centres" class="level4">
<h4 class="anchored" data-anchor-id="eldercare-centres">6.1.1.2 Eldercare Centres</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>eldercare_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(eldercare, <span class="st">"Spatial"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>eldercare_sp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>class       : SpatialPointsDataFrame 
features    : 133 
extent      : 14481.92, 41665.14, 28218.43, 46804.9  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 2
names       :                                 NAME, capacity 
min values  : Abdullah Shooker Jewish Welfare Home,      100 
max values  :               Zion Home For The Aged,      100 </code></pre>
</div>
</div>
</section>
<section id="community-gardens-1" class="level4">
<h4 class="anchored" data-anchor-id="community-gardens-1">6.1.1.3 Community gardens</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>garden_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(garden, <span class="st">"Spatial"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="chas-clinics-1" class="level4">
<h4 class="anchored" data-anchor-id="chas-clinics-1">6.1.1.4 CHAS clinics</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>chas_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(chas, <span class="st">"Spatial"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="hospitals" class="level4">
<h4 class="anchored" data-anchor-id="hospitals">6.1.1.5 Hospitals</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>hospital_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(hospital, <span class="st">"Spatial"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="community-centres" class="level4">
<h4 class="anchored" data-anchor-id="community-centres">6.1.1.5 Community Centres</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>communitycentre_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(communitycentre, <span class="st">"Spatial"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="parks" class="level4">
<h4 class="anchored" data-anchor-id="parks">6.1.1.6 Parks</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>park_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(park, <span class="st">"Spatial"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="computing-distance-matrix" class="level3">
<h3 class="anchored" data-anchor-id="computing-distance-matrix">6.1.2 Computing distance matrix</h3>
<p>Next, we use spDists from sp to compute the distance matrix from each hexagon in hex_sp to each location in every facility data set, as shown below.</p>
<section id="hexagons-and-eldercare-centres" class="level4">
<h4 class="anchored" data-anchor-id="hexagons-and-eldercare-centres">6.1.2.1 Hexagons and eldercare centres</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>eldercare_dist_matrix <span class="ot">&lt;-</span> <span class="fu">spDists</span>(hex_sp, eldercare_sp, <span class="at">longlat =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We put the longlat argument as FALSE as our data set geometries are not in longlat format.</p>
<p>To have an understanding of how the distance looks like, we can apply the following code to see the first 10 rows and columns of <strong>eldercare_dist_matrix.</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(eldercare_dist_matrix, <span class="at">n =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1]     [,2]     [,3]     [,4]     [,5]
[1,] 10768.59 15410.50 12254.27 7432.783 2821.313
[2,] 10768.59 15410.50 12254.27 7432.783 2821.313
[3,] 10566.90 15343.01 12077.96 7377.224 2788.049
[4,] 10566.90 15343.01 12077.96 7377.224 2788.049
[5,] 10702.29 15323.17 12205.93 7350.292 2747.318</code></pre>
</div>
</div>
<p>Then, we repeat the same steps for all other facilities in section 3.1.2.2 to 3.1.3.4.</p>
</section>
<section id="community-gardens-2" class="level4">
<h4 class="anchored" data-anchor-id="community-gardens-2">6.1.2.2 Community gardens</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>garden_dist_matrix <span class="ot">&lt;-</span> <span class="fu">spDists</span>(hex_sp, garden_sp, <span class="at">longlat =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="chas-clinics-2" class="level4">
<h4 class="anchored" data-anchor-id="chas-clinics-2">6.1.2.3 CHAS clinics</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>chas_dist_matrix <span class="ot">&lt;-</span> <span class="fu">spDists</span>(hex_sp, chas_sp, <span class="at">longlat =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="other-amenities-hospitals-community-centres-parks-1" class="level4">
<h4 class="anchored" data-anchor-id="other-amenities-hospitals-community-centres-parks-1">6.1.2.4 Other amenities (Hospitals, Community Centres, Parks)</h4>
<p>Hospitals:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>hospital_dist_matrix <span class="ot">&lt;-</span> <span class="fu">spDists</span>(hex_sp, hospital_sp, <span class="at">longlat =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Community Centres:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>communitycentre_dist_matrix <span class="ot">&lt;-</span> <span class="fu">spDists</span>(hex_sp, communitycentre_sp, <span class="at">longlat =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Parks:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>park_dist_matrix <span class="ot">&lt;-</span> <span class="fu">spDists</span>(hex_sp, park_sp, <span class="at">longlat =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="labelling-column-and-row-headers-of-distance-matrix" class="level3">
<h3 class="anchored" data-anchor-id="labelling-column-and-row-headers-of-distance-matrix">6.1.3 Labelling column and row headers of distance matrix</h3>
<p>Right now, our matrices do not have column and row headers, which can make it difficult to trace the hexagons and facilities when we look at them.</p>
<p>Hence, we use the codes below to extract the names of each data set.</p>
<p>Then, we insert the names into the matrices accordingly.</p>
</section>
<section id="distance-matrix-in-kilometres" class="level3">
<h3 class="anchored" data-anchor-id="distance-matrix-in-kilometres">6.1.6 Distance matrix in kilometres</h3>
<p>Since our distance matrix values are currently in metres (as we used the SVY21 CRS), the unit system is a bit too small. We can convert their units to to kilometres using the code chunk below.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>eldercare_distmat_km <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(eldercare_dist_matrix<span class="sc">/</span><span class="dv">1000</span>)</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>garden_distmat_km <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(garden_dist_matrix<span class="sc">/</span><span class="dv">1000</span>)</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>chas_distmat_km <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(chas_dist_matrix<span class="sc">/</span><span class="dv">1000</span>)</span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>hospital_distmat_km <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(hospital_dist_matrix<span class="sc">/</span><span class="dv">1000</span>)</span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>communitycentre_distmat_km <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(communitycentre_dist_matrix<span class="sc">/</span><span class="dv">1000</span>)</span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>park_distmat_km <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(park_dist_matrix<span class="sc">/</span><span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s take a look at the first 3 rows and columns of the <strong>eldercare_distmat_km</strong> matrix to have a rough idea of how it looks like.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(eldercare_distmat_km, <span class="dv">3</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Yuhua Senior Activity Centre THK SAC @ Kaki Bukit THK SAC @ Boon Lay
DEPOT ROAD                     10.76859             15.41050           12.25427
KENT RIDGE                     10.76859             15.41050           12.25427
DEPOT ROAD                     10.56690             15.34301           12.07796
           PEACE-Connect Senior Activity Centre@5 THK SAC @ Beo Crescent
DEPOT ROAD                               7.432783               2.821313
KENT RIDGE                               7.432783               2.821313
DEPOT ROAD                               7.377224               2.788049
           Silver ACE @ Bukit Merah
DEPOT ROAD                 2.762694
KENT RIDGE                 2.762694
DEPOT ROAD                 2.804518
           Lions Befrienders Senior Activity Centre @ Tampines Blk 499C
DEPOT ROAD                                                     19.19933
KENT RIDGE                                                     19.19933
DEPOT ROAD                                                     19.11042
           Care Corner Senior Activity Centre (WL569)
DEPOT ROAD                                   16.49441
KENT RIDGE                                   16.49441
DEPOT ROAD                                   16.22810
           Fei Yue Senior Activity Centre (Bukit Batok Branch)
DEPOT ROAD                                            9.081028
KENT RIDGE                                            9.081028
DEPOT ROAD                                            8.856112
           COMNET Senior Activity Centre @ 182 Rivervale Crescent
DEPOT ROAD                                               16.95896
KENT RIDGE                                               16.95896
DEPOT ROAD                                               16.79460
           Abdullah Shooker Jewish Welfare Home Adventist Home For The Elders
DEPOT ROAD                             5.557858                      8.258787
KENT RIDGE                             5.557858                      8.258787
DEPOT ROAD                             5.479791                      8.113761
           AWWA Community Home for Senior Citizens Bo Tien Home For The Aged
DEPOT ROAD                                10.92968                  10.76771
KENT RIDGE                                10.92968                  10.76771
DEPOT ROAD                                10.70610                  10.60702
           Evergreen Place, Home @Hong San Geylang East Home For The Aged
DEPOT ROAD                        12.39381                       10.29883
KENT RIDGE                        12.39381                       10.29883
DEPOT ROAD                        12.15017                       10.21758
           Henderson Senior Citizens' Home Kheng Chiu Loke Tin Kee Home
DEPOT ROAD                        2.221623                     18.10114
KENT RIDGE                        2.221623                     18.10114
DEPOT ROAD                        2.231153                     18.01019
           PERTAPIS Senior Citizens Fellowship Home SBWS Happy Villa (Females)
DEPOT ROAD                                 8.978544                   4.540208
KENT RIDGE                                 8.978544                   4.540208
DEPOT ROAD                                 8.805637                   4.616720
           Singapore Baptist Convention Golden Age Home
DEPOT ROAD                                     8.543230
KENT RIDGE                                     8.543230
DEPOT ROAD                                     8.441053
           St Andrew's Cathedral Home For The Aged St John's Home for the Aged
DEPOT ROAD                                5.553162                    9.799429
KENT RIDGE                                5.553162                    9.799429
DEPOT ROAD                                5.335628                    9.674079
           Jia Ying Senior Activity Centre @ 25 (Branch)
DEPOT ROAD                                      13.66174
KENT RIDGE                                      13.66174
DEPOT ROAD                                      13.50605
           Kembangan- Chai Chee Senior Activity Centre King George000e+000
DEPOT ROAD                                    14.18357            7.208691
KENT RIDGE                                    14.18357            7.208691
DEPOT ROAD                                    14.12557            7.135687
           Kreta Ayer Senior Activity Centre (Banda)
DEPOT ROAD                                  4.606908
KENT RIDGE                                  4.606908
DEPOT ROAD                                  4.648112
           Kreta Ayer Senior Activity Centre (Jalan Kukoh)
DEPOT ROAD                                        4.212242
KENT RIDGE                                        4.212242
DEPOT ROAD                                        4.211064
           Kreta Ayer Senior Activity Centre (Chin Swee)
DEPOT ROAD                                      4.501230
KENT RIDGE                                      4.501230
DEPOT ROAD                                      4.502026
           Lions Befrienders (Ang Mo Kio 318) Senior Activity Centre
DEPOT ROAD                                                   10.5950
KENT RIDGE                                                   10.5950
DEPOT ROAD                                                   10.3792
           Lions Befrienders (Bendemeer) Senior Activity Centre
DEPOT ROAD                                             8.038227
KENT RIDGE                                             8.038227
DEPOT ROAD                                             7.929364
           Lions Befrienders (Clementi) Senior Activity Centre
DEPOT ROAD                                            4.857203
KENT RIDGE                                            4.857203
DEPOT ROAD                                            4.665798
           Lions Befrienders (Ghim Moh) Senior Activity Centre
DEPOT ROAD                                            3.580812
KENT RIDGE                                            3.580812
DEPOT ROAD                                            3.333016
           Lions Befrienders (Mei Ling) Senior Activity Centre
DEPOT ROAD                                            1.497476
KENT RIDGE                                            1.497476
DEPOT ROAD                                            1.240629
           Lions Befrienders (Tampines) Senior Activity Centre
DEPOT ROAD                                            18.73861
KENT RIDGE                                            18.73861
DEPOT ROAD                                            18.64712
           Moral Senior Activity Centre (Kaki Bukit)
DEPOT ROAD                                  14.64563
KENT RIDGE                                  14.64563
DEPOT ROAD                                  14.57943
           PEACE-Connect Senior Activity Centre@8 Sarah Senior Activity Centre
DEPOT ROAD                               7.357080                     2.552328
KENT RIDGE                               7.357080                     2.552328
DEPOT ROAD                               7.299589                     2.607032
           Redhill Moral Senior Activity Centre Silver Ace @ Taman Jurong
DEPOT ROAD                             1.916804                  10.60729
KENT RIDGE                             1.916804                  10.60729
DEPOT ROAD                             1.905709                  10.43367
           Silver Ace@Lengkok Bahru Silver Ace@Redhill Silver Ace@Telok Blangah
DEPOT ROAD                 1.542361           1.838115                 2.582780
KENT RIDGE                 1.542361           1.838115                 2.582780
DEPOT ROAD                 1.463295           1.793539                 2.734087
           Silver Ace@Whampoa Sunlove Senior Activity Centre (Chai Chee)
DEPOT ROAD           8.105683                                   14.46693
KENT RIDGE           8.105683                                   14.46693
DEPOT ROAD           7.971885                                   14.41294
           St Vincent Home Zion Home For The Aged
DEPOT ROAD        5.904919               14.91031
KENT RIDGE        5.904919               14.91031
DEPOT ROAD        5.855943               14.85324
           NTUC Health Cluster Support @ Taman Jurong
DEPOT ROAD                                   10.89856
KENT RIDGE                                   10.89856
DEPOT ROAD                                   10.72806
           NTUC Health Cluster Support @ Bt Merah THK Cluster Support @ Bedok
DEPOT ROAD                               2.320317                    15.59958
KENT RIDGE                               2.320317                    15.59958
DEPOT ROAD                               2.346807                    15.55936
           Peace-Connect Cluster Operator THK Cluster Support @ Pipit
DEPOT ROAD                       7.432783                    10.61185
KENT RIDGE                       7.432783                    10.61185
DEPOT ROAD                       7.377224                    10.52984
           THK Cluster Support @ AMK AMKFSC Cluster Support
DEPOT ROAD                  11.56523               11.01284
KENT RIDGE                  11.56523               11.01284
DEPOT ROAD                  11.33507               10.81115
           Carecorner Cluster Suppport SACS Cluster Support@Jurong East
DEPOT ROAD                    8.136583                         10.79587
KENT RIDGE                    8.136583                         10.79587
DEPOT ROAD                    7.965075                         10.58972
           THK Senior Group Home @ AMK257 THK Senior Group Home @ Indus
DEPOT ROAD                       10.50357                      3.152904
KENT RIDGE                       10.50357                      3.152904
DEPOT ROAD                       10.26863                      3.104613
           PEACE-Connect Senior Group Home@8
DEPOT ROAD                          7.357080
KENT RIDGE                          7.357080
DEPOT ROAD                          7.299589
           TOUCH Senior Group Home@Geylang Bahru
DEPOT ROAD                              8.741077
KENT RIDGE                              8.741077
DEPOT ROAD                              8.635039
           Lions Befrienders Senior Group Home (Mei Ling)
DEPOT ROAD                                       1.453488
KENT RIDGE                                       1.453488
DEPOT ROAD                                       1.193367
           Care Corner SGH @ WL569A SACS Senior Group Home @ 373 JE
DEPOT ROAD                 16.49441                        10.79091
KENT RIDGE                 16.49441                        10.79091
DEPOT ROAD                 16.22810                        10.58532
           Fei Yue Senior Group Home @ Hougang
DEPOT ROAD                            12.24240
KENT RIDGE                            12.24240
DEPOT ROAD                            12.10808
           COMNET Senior Group Home @ Rivervale Crescent
DEPOT ROAD                                      16.95896
KENT RIDGE                                      16.95896
DEPOT ROAD                                      16.79460
           Lions Befrienders Senior Group Home @ Tampines 499C
DEPOT ROAD                                            19.19933
KENT RIDGE                                            19.19933
DEPOT ROAD                                            19.11042
           Fei Yue Senior Group Home @ Teck Whye Crescent
DEPOT ROAD                                       12.43091
KENT RIDGE                                       12.43091
DEPOT ROAD                                       12.17904
           Care Corner SGH @ WL180C THK Senior Group Home @ Pipit Road
DEPOT ROAD                 17.67461                           10.66932
KENT RIDGE                 17.67461                           10.66932
DEPOT ROAD                 17.40822                           10.58660
           NTUC Health Senior Group Home @ Henderson
DEPOT ROAD                                  2.221623
KENT RIDGE                                  2.221623
DEPOT ROAD                                  2.231153
           Econ Health and Wellness Centre
DEPOT ROAD                        9.126577
KENT RIDGE                        9.126577
DEPOT ROAD                        8.944136
           Thye Hua Kwan Moral Charities Limited
DEPOT ROAD                              10.83700
KENT RIDGE                              10.83700
DEPOT ROAD                              10.65974
           Econ Health and Wellness Centre Econ Health and Wellness Centre
DEPOT ROAD                        1.707285                        16.57802
KENT RIDGE                        1.707285                        16.57802
DEPOT ROAD                        1.521875                        16.31170
           Econ Health and Wellness Centre
DEPOT ROAD                        3.006035
KENT RIDGE                        3.006035
DEPOT ROAD                        2.965288
           Thye Hua Kwan Moral Charities Limited
DEPOT ROAD                              1.032054
KENT RIDGE                              1.032054
DEPOT ROAD                              1.279705
           Pacific Activity Centres Pte Ltd Econ Health and Wellness Centre
DEPOT ROAD                         17.27840                        14.00155
KENT RIDGE                         17.27840                        14.00155
DEPOT ROAD                         17.01261                        13.75145
           Econ Health and Wellness Centre Econ Health and Wellness Centre
DEPOT ROAD                        17.52692                        15.84899
KENT RIDGE                        17.52692                        15.84899
DEPOT ROAD                        17.45148                        15.65940
           Pacific Activity Centres Pte Ltd Pacific Activity Centres Pte Ltd
DEPOT ROAD                         17.46281                         17.48873
KENT RIDGE                         17.46281                         17.48873
DEPOT ROAD                         17.27481                         17.24186
           Econ Health and Wellness Centre Pacific Activity Centres Pte Ltd
DEPOT ROAD                        8.937104                         17.32614
KENT RIDGE                        8.937104                         17.32614
DEPOT ROAD                        8.703351                         17.08120
           Pacific Activity Centres Pte Ltd Pacific Activity Centres Pte Ltd
DEPOT ROAD                         17.14385                         16.77031
KENT RIDGE                         17.14385                         16.77031
DEPOT ROAD                         16.96089                         16.67008
           NTUC Eldercare Co-operative Ltd Pacific Activity Centres Pte Ltd
DEPOT ROAD                        17.62679                         15.31435
KENT RIDGE                        17.62679                         15.31435
DEPOT ROAD                        17.36043                         15.13741
           Pacific Activity Centres Pte Ltd Adventist Home for the Elders
DEPOT ROAD                         3.073342                      12.09625
KENT RIDGE                         3.073342                      12.09625
DEPOT ROAD                         3.069873                      11.91172
           Adventist Home for the Elders Methodist Welfare Services
DEPOT ROAD                      8.403204                   15.60002
KENT RIDGE                      8.403204                   15.60002
DEPOT ROAD                      8.256663                   15.40072
           Presbyterian Community Services
DEPOT ROAD                        7.101367
KENT RIDGE                        7.101367
DEPOT ROAD                        6.853605
           Singapore Anglican Community Services
DEPOT ROAD                              16.42016
KENT RIDGE                              16.42016
DEPOT ROAD                              16.17779
           Singapore Anglican Community Services Unicare Services Pte Ltd
DEPOT ROAD                              11.33441                 12.77876
KENT RIDGE                              11.33441                 12.77876
DEPOT ROAD                              11.13841                 12.54205
           AWWA Senior Activity Centre
DEPOT ROAD                    10.92968
KENT RIDGE                    10.92968
DEPOT ROAD                    10.70610
           THK Bedok Radiance Senior Activity Centre
DEPOT ROAD                                  15.63803
KENT RIDGE                                  15.63803
DEPOT ROAD                                  15.59665
           Care Corner Senior Activity Centre (TP5)
DEPOT ROAD                                 8.708024
KENT RIDGE                                 8.708024
DEPOT ROAD                                 8.540212
           Care Corner Senior Activity Centre (TP149)
DEPOT ROAD                                   7.419552
KENT RIDGE                                   7.419552
DEPOT ROAD                                   7.235688
           Care Corner Senior Activity Centre (TP170)
DEPOT ROAD                                   7.131283
KENT RIDGE                                   7.131283
DEPOT ROAD                                   6.949616
           Care Corner Senior Activity Centre (TP62B)
DEPOT ROAD                                   8.136583
KENT RIDGE                                   8.136583
DEPOT ROAD                                   7.965075
           CARElderly Senior Activity Centre
DEPOT ROAD                          10.73266
KENT RIDGE                          10.73266
DEPOT ROAD                          10.63323
           CARElderly Senior Activity Centre (Merpati)
DEPOT ROAD                                    10.49538
KENT RIDGE                                    10.49538
DEPOT ROAD                                    10.39713
           COMNET @ Teck Ghee Senior Activity Centre
DEPOT ROAD                                  10.84662
KENT RIDGE                                  10.84662
DEPOT ROAD                                  10.63928
           Teck Ghee Senior Activity Centre Branch @ Blk 469
DEPOT ROAD                                          11.01284
KENT RIDGE                                          11.01284
DEPOT ROAD                                          10.81115
           Chong Hua Tong Senior Activity Centre
DEPOT ROAD                              6.502252
KENT RIDGE                              6.502252
DEPOT ROAD                              6.382633
           COMNET@Sin Ming Senior Activity Centre
DEPOT ROAD                               9.270714
KENT RIDGE                               9.270714
DEPOT ROAD                               9.052102
           Fei Yue Senior Activity Centre (Holland Close)
DEPOT ROAD                                       3.124593
KENT RIDGE                                       3.124593
DEPOT ROAD                                       2.858799
           Fei Yue SAC (Commonwealth Branch)
DEPOT ROAD                          2.934184
KENT RIDGE                          2.934184
DEPOT ROAD                          2.667727
           Fei Yue Senior Activity Centre (Teck Whye) Goodlife!
DEPOT ROAD                                   12.13158  12.72238
KENT RIDGE                                   12.13158  12.72238
DEPOT ROAD                                   11.88021  12.70247
           Harmony Activity Centre Henderson Senior Activity Centre
DEPOT ROAD                10.28149                         2.221623
KENT RIDGE                10.28149                         2.221623
DEPOT ROAD                10.20134                         2.231153
           Indus Moral CARE Jia Ying Senior Activity Centre
DEPOT ROAD         3.152904                        13.51780
KENT RIDGE         3.152904                        13.51780
DEPOT ROAD         3.104613                        13.36491
           Sunlove Senior Activity Centre (Marsiling)
DEPOT ROAD                                   17.69458
KENT RIDGE                                   17.69458
DEPOT ROAD                                   17.42831
           Tembusu Senior Activity Centre THK SAC @ AMK 257 THK SAC @ AMK 645
DEPOT ROAD                       11.87656          10.50357          11.70562
KENT RIDGE                       11.87656          10.50357          11.70562
DEPOT ROAD                       11.81408          10.26863          11.47405
           THK SAC @ Toa Payoh 15 THK SAC @ Bukit Merah
DEPOT ROAD                8.74966              2.139170
KENT RIDGE                8.74966              2.139170
DEPOT ROAD                8.59333              2.151858
           THK SAC @ Henderson (Satellite 93) THK SAC @ MacPherson
DEPOT ROAD                           2.135025             10.48451
KENT RIDGE                           2.135025             10.48451
DEPOT ROAD                           2.107221             10.39914
           THK SAC @ Telok Blangah Crescent THK SAC @ Toa Payoh 31
DEPOT ROAD                          1.75364               8.178301
KENT RIDGE                          1.75364               8.178301
DEPOT ROAD                          1.84931               8.018690
           THK SAC @ AMK 208 Thong Kheng Senior Activity Centre (Queenstown)
DEPOT ROAD          10.33161                                       0.8368224
KENT RIDGE          10.33161                                       0.8368224
DEPOT ROAD          10.10879                                       0.6892143
           Thong Kheng Senior Activity Centre (Tanglin-Cairnhill)
DEPOT ROAD                                               2.376208
KENT RIDGE                                               2.376208
DEPOT ROAD                                               2.389873
           TOUCH Senior Activity Centre Wesley Senior Activity Centre
DEPOT ROAD                     8.741077                      6.827514
KENT RIDGE                     8.741077                      6.827514
DEPOT ROAD                     8.635039                      6.755446
           Evergreen Circle SAC Fei Yue Senior Activity Centre (Bukit Batok)
DEPOT ROAD             16.38093                                     9.696468
KENT RIDGE             16.38093                                     9.696468
DEPOT ROAD             16.28901                                     9.480600</code></pre>
</div>
</div>
</section>
</section>
<section id="modelling-and-visualizing-accesssibility-using-hansen-method" class="level1">
<h1>7 Modelling and Visualizing Accesssibility using Hansen Method</h1>
<p>To compute Hansen’s accessibility, we use ac() of <strong>SpatialAcc</strong> package.</p>
<section id="computing-hansens-accessibility" class="level2">
<h2 class="anchored" data-anchor-id="computing-hansens-accessibility">7.1 Computing Hansen’s accessibility</h2>
<p>Here, we compute the accessibility of eldercare centres (<strong>eldercare</strong>) from each hexagon, and convert it to a data frame.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>eldercare_acc_hansen <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>                                      eldercare<span class="sc">$</span>capacity,</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>                                      eldercare_distmat_km,</span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"Hansen"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then, we rename the column name as it looks too messy (and confusing if we want to copy it later on).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(eldercare_acc_hansen) <span class="ot">&lt;-</span> <span class="st">"accHansen"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then, we convert the data into tibble format.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>eldercare_acc_hansen <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(eldercare_acc_hansen)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, we bind the columns of <strong>hex_sf</strong> and <strong>eldercare_acc_hansen</strong> so that we can find out the respective eldercare_acc_hansen values for each hexagon in <strong>hex_sf</strong> in a very clear manner, using bind_cols().</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(eldercare_hexagon_hansen, <span class="st">"data/rds/eldercare_hexagon_hansen.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can do the same for the other 5 types of facilities, as shown in the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>garden_acc_hansen <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>                                      garden<span class="sc">$</span>capacity,</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>                                      garden_distmat_km,</span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"Hansen"</span>))</span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a>chas_acc_hansen <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb172-7"><a href="#cb172-7" aria-hidden="true" tabindex="-1"></a>                                      chas<span class="sc">$</span>capacity,</span>
<span id="cb172-8"><a href="#cb172-8" aria-hidden="true" tabindex="-1"></a>                                      chas_distmat_km,</span>
<span id="cb172-9"><a href="#cb172-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb172-10"><a href="#cb172-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"Hansen"</span>))</span>
<span id="cb172-11"><a href="#cb172-11" aria-hidden="true" tabindex="-1"></a>hospital_acc_hansen <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb172-12"><a href="#cb172-12" aria-hidden="true" tabindex="-1"></a>                                      hospital<span class="sc">$</span>capacity,</span>
<span id="cb172-13"><a href="#cb172-13" aria-hidden="true" tabindex="-1"></a>                                      hospital_distmat_km,</span>
<span id="cb172-14"><a href="#cb172-14" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb172-15"><a href="#cb172-15" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"Hansen"</span>))</span>
<span id="cb172-16"><a href="#cb172-16" aria-hidden="true" tabindex="-1"></a>communitycentre_acc_hansen <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb172-17"><a href="#cb172-17" aria-hidden="true" tabindex="-1"></a>                                      communitycentre<span class="sc">$</span>capacity,</span>
<span id="cb172-18"><a href="#cb172-18" aria-hidden="true" tabindex="-1"></a>                                      communitycentre_distmat_km,</span>
<span id="cb172-19"><a href="#cb172-19" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb172-20"><a href="#cb172-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"Hansen"</span>))</span>
<span id="cb172-21"><a href="#cb172-21" aria-hidden="true" tabindex="-1"></a>park_acc_hansen <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb172-22"><a href="#cb172-22" aria-hidden="true" tabindex="-1"></a>                                      park<span class="sc">$</span>capacity,</span>
<span id="cb172-23"><a href="#cb172-23" aria-hidden="true" tabindex="-1"></a>                                      park_distmat_km,</span>
<span id="cb172-24"><a href="#cb172-24" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb172-25"><a href="#cb172-25" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"Hansen"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(garden_acc_hansen) <span class="ot">&lt;-</span> <span class="st">"accHansen"</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(chas_acc_hansen) <span class="ot">&lt;-</span> <span class="st">"accHansen"</span></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(hospital_acc_hansen) <span class="ot">&lt;-</span> <span class="st">"accHansen"</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(communitycentre_acc_hansen) <span class="ot">&lt;-</span> <span class="st">"accHansen"</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(park_acc_hansen) <span class="ot">&lt;-</span> <span class="st">"accHansen"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>garden_acc_hansen <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(garden_acc_hansen)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>chas_acc_hansen <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(chas_acc_hansen)</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>hospital_acc_hansen <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(hospital_acc_hansen)</span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>communitycentre_acc_hansen <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(communitycentre_acc_hansen)</span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a>park_acc_hansen <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(park_acc_hansen)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="visualizing-hansens-accessibility" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-hansens-accessibility">7.2 Visualizing Hansen’s accessibility</h2>
<section id="extracting-map-extend" class="level3">
<h3 class="anchored" data-anchor-id="extracting-map-extend">7.2.1 Extracting map extend</h3>
<p>We need to map extend for our visualizations. To extract it, we use st_bbox() from sf package.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>mapex <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(hex_sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="visualization" class="level3">
<h3 class="anchored" data-anchor-id="visualization">7.2.2 Visualization</h3>
<p>Then, we apply the appropriate tmap functions to create our visualization of the accessibility values. Here, I will only show selected facilities due to space constraints.</p>
<p>Eldercare centres:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(eldercare_hexagon_hansen,</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">bbox =</span> mapex) <span class="sc">+</span> </span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">"accHansen"</span>,</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">10</span>,</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(eldercare) <span class="sc">+</span></span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Accessibility to eldercare: Hansen method"</span>,</span>
<span id="cb176-12"><a href="#cb176-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb176-13"><a href="#cb176-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="dv">2</span>,</span>
<span id="cb176-14"><a href="#cb176-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside =</span> <span class="cn">FALSE</span>,</span>
<span id="cb176-15"><a href="#cb176-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb176-16"><a href="#cb176-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">3.0</span>,</span>
<span id="cb176-17"><a href="#cb176-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.format =</span> <span class="fu">list</span>(<span class="at">digits =</span> <span class="dv">6</span>),</span>
<span id="cb176-18"><a href="#cb176-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>),</span>
<span id="cb176-19"><a href="#cb176-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb176-20"><a href="#cb176-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb176-21"><a href="#cb176-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb176-22"><a href="#cb176-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">lwd =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/ac eldercare hansen.png" class="img-fluid"></p>
<p>Community gardens:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(garden_hexagon_hansen,</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">bbox =</span> mapex) <span class="sc">+</span> </span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">"accHansen"</span>,</span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">10</span>,</span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(garden) <span class="sc">+</span></span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Accessibility to community gardens: Hansen method"</span>,</span>
<span id="cb177-12"><a href="#cb177-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb177-13"><a href="#cb177-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb177-14"><a href="#cb177-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside =</span> <span class="cn">FALSE</span>,</span>
<span id="cb177-15"><a href="#cb177-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb177-16"><a href="#cb177-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">3.0</span>,</span>
<span id="cb177-17"><a href="#cb177-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.format =</span> <span class="fu">list</span>(<span class="at">digits =</span> <span class="dv">6</span>),</span>
<span id="cb177-18"><a href="#cb177-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>),</span>
<span id="cb177-19"><a href="#cb177-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb177-20"><a href="#cb177-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb177-21"><a href="#cb177-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb177-22"><a href="#cb177-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">lwd =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/ac garden hansen.png" class="img-fluid"></p>
<p>Of course, we can adjust the options in tm_fill() however we like. n represents the number of classifications for our accessibility values, and style represents how they should be classified.</p>
</section>
</section>
<section id="statistical-graphic-visualization" class="level2">
<h2 class="anchored" data-anchor-id="statistical-graphic-visualization">7.3 Statistical graphic visualization</h2>
<p>A statistical graphic visualization might be very helpful to give a concise big picture of our data too.</p>
<p>Since we want a simpler view, we can perhaps choose to depict our data by regions as it consists of less variables.</p>
<p>To derive the region name of each hexagon, we can use left_join() from <strong>dplyr</strong> as shown below, bringing region names in from mpsz, and joining both data sets using subzone names.</p>
<p>Eldercare:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>eldercare_hansen <span class="ot">&lt;-</span> <span class="fu">left_join</span>(eldercare_hexagon_hansen, <span class="fu">st_drop_geometry</span>(mpsz), </span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">SUBZONE</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'SUBZONE_N'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In the above, we also selected relevant columns only, to keep our output simple.</p>
<p>Then, we use the relevant <strong>ggplot2</strong> functions to construct a boxplot of accessibility values by regions as shown below.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>eldercare_hansen, </span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">log</span>(accHansen), </span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x=</span> REGION_N)) <span class="sc">+</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat=</span><span class="st">"summary"</span>, </span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fun.y=</span><span class="st">"mean"</span>, </span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span><span class="st">"red"</span>, </span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/eldercare hansen stat plot.png" class="img-fluid"></p>
<p>Community gardens:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>garden_hansen <span class="ot">&lt;-</span> <span class="fu">left_join</span>(garden_hexagon_hansen, <span class="fu">st_drop_geometry</span>(mpsz), </span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">SUBZONE</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'SUBZONE_N'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>garden_hansen, </span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">log</span>(accHansen), </span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x=</span> REGION_N)) <span class="sc">+</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat=</span><span class="st">"summary"</span>, </span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fun.y=</span><span class="st">"mean"</span>, </span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span><span class="st">"red"</span>, </span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/garden hansen stat plot.png" class="img-fluid"></p>
</section>
</section>
<section id="modelling-and-visualizing-accesssibility-using-kd2sfca-method" class="level1">
<h1>8 Modelling and Visualizing Accesssibility using KD2SFCA Method</h1>
<p>Similar to Hansen method, we would be using ac() from <strong>SpatialAcc</strong> package. We would also mostly apply the same steps throughout the analysis, with the only change being the family argument used in ac().</p>
<section id="computing-kd2sfcas-accessibility" class="level2">
<h2 class="anchored" data-anchor-id="computing-kd2sfcas-accessibility">8.1 Computing KD2SFCA’s accessibility</h2>
<p>However, KD2SFCA method does not allow NA values. Hence, we replace the NA values with ‘0’ as shown below before beginning our analysis.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>hex_sf<span class="sc">$</span>hexagon_demand[<span class="fu">is.na</span>(hex_sf<span class="sc">$</span>hexagon_demand)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Thereafter, we apply similar analysis steps as that of Hansen method.</p>
<p>Eldercare centres:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>eldercare_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>                                      eldercare<span class="sc">$</span>capacity,</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>                                      eldercare_distmat_km,</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"KD2SFCA"</span>))</span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(eldercare_acc_KD2SFCA) <span class="ot">&lt;-</span> <span class="st">"accKD2SFCA"</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>eldercare_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(eldercare_acc_KD2SFCA)</span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>eldercare_hexagon_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, eldercare_acc_KD2SFCA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>CHAS clinics:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>chas_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>                                      chas<span class="sc">$</span>capacity,</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>                                      chas_distmat_km,</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"KD2SFCA"</span>))</span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(chas_acc_KD2SFCA) <span class="ot">&lt;-</span> <span class="st">"accKD2SFCA"</span></span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a>chas_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(chas_acc_KD2SFCA)</span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a>chas_hexagon_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, chas_acc_KD2SFCA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can do the same for the other types of facilities, as shown in the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>garden_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>                                      garden<span class="sc">$</span>capacity,</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>                                      garden_distmat_km,</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"KD2SFCA"</span>))</span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(garden_acc_KD2SFCA) <span class="ot">&lt;-</span> <span class="st">"accKD2SFCA"</span></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a>garden_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(garden_acc_KD2SFCA)</span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a>garden_hexagon_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, garden_acc_KD2SFCA)</span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true" tabindex="-1"></a>hospital_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true" tabindex="-1"></a>                                      hospital<span class="sc">$</span>capacity,</span>
<span id="cb185-14"><a href="#cb185-14" aria-hidden="true" tabindex="-1"></a>                                      hospital_distmat_km,</span>
<span id="cb185-15"><a href="#cb185-15" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb185-16"><a href="#cb185-16" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb185-17"><a href="#cb185-17" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"KD2SFCA"</span>))</span>
<span id="cb185-18"><a href="#cb185-18" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(hospital_acc_KD2SFCA) <span class="ot">&lt;-</span> <span class="st">"accKD2SFCA"</span></span>
<span id="cb185-19"><a href="#cb185-19" aria-hidden="true" tabindex="-1"></a>hospital_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(hospital_acc_KD2SFCA)</span>
<span id="cb185-20"><a href="#cb185-20" aria-hidden="true" tabindex="-1"></a>hospital_hexagon_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, hospital_acc_KD2SFCA)</span>
<span id="cb185-21"><a href="#cb185-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-22"><a href="#cb185-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-23"><a href="#cb185-23" aria-hidden="true" tabindex="-1"></a>communitycentre_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb185-24"><a href="#cb185-24" aria-hidden="true" tabindex="-1"></a>                                       communitycentre<span class="sc">$</span>capacity,</span>
<span id="cb185-25"><a href="#cb185-25" aria-hidden="true" tabindex="-1"></a>                                       communitycentre_distmat_km,</span>
<span id="cb185-26"><a href="#cb185-26" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb185-27"><a href="#cb185-27" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb185-28"><a href="#cb185-28" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"KD2SFCA"</span>))</span>
<span id="cb185-29"><a href="#cb185-29" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(communitycentre_acc_KD2SFCA) <span class="ot">&lt;-</span> <span class="st">"accKD2SFCA"</span></span>
<span id="cb185-30"><a href="#cb185-30" aria-hidden="true" tabindex="-1"></a>communitycentre_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(communitycentre_acc_KD2SFCA)</span>
<span id="cb185-31"><a href="#cb185-31" aria-hidden="true" tabindex="-1"></a>communitycentre_hexagon_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, communitycentre_acc_KD2SFCA)</span>
<span id="cb185-32"><a href="#cb185-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-33"><a href="#cb185-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-34"><a href="#cb185-34" aria-hidden="true" tabindex="-1"></a>park_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb185-35"><a href="#cb185-35" aria-hidden="true" tabindex="-1"></a>                                      park<span class="sc">$</span>capacity,</span>
<span id="cb185-36"><a href="#cb185-36" aria-hidden="true" tabindex="-1"></a>                                      park_distmat_km,</span>
<span id="cb185-37"><a href="#cb185-37" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb185-38"><a href="#cb185-38" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb185-39"><a href="#cb185-39" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"KD2SFCA"</span>))</span>
<span id="cb185-40"><a href="#cb185-40" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(park_acc_KD2SFCA) <span class="ot">&lt;-</span> <span class="st">"accKD2SFCA"</span></span>
<span id="cb185-41"><a href="#cb185-41" aria-hidden="true" tabindex="-1"></a>park_acc_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(park_acc_KD2SFCA)</span>
<span id="cb185-42"><a href="#cb185-42" aria-hidden="true" tabindex="-1"></a>park_hexagon_KD2SFCA <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, park_acc_KD2SFCA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="visualizing-kd2sfcas-accessibility" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-kd2sfcas-accessibility">8.2 Visualizing KD2SFCA’s accessibility</h2>
<p>Similar to Hansen method, we can also visualize the KD2SFCA accessibility methods as shown below.</p>
<p>Eldercare:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(eldercare_hexagon_KD2SFCA,</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">bbox =</span> mapex) <span class="sc">+</span> </span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">"accKD2SFCA"</span>,</span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">10</span>,</span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(eldercare) <span class="sc">+</span></span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Accessibility to eldercare: KD2SFCA method"</span>,</span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb186-14"><a href="#cb186-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside =</span> <span class="cn">FALSE</span>,</span>
<span id="cb186-15"><a href="#cb186-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb186-16"><a href="#cb186-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">3.0</span>,</span>
<span id="cb186-17"><a href="#cb186-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.format =</span> <span class="fu">list</span>(<span class="at">digits =</span> <span class="dv">6</span>),</span>
<span id="cb186-18"><a href="#cb186-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>),</span>
<span id="cb186-19"><a href="#cb186-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb186-20"><a href="#cb186-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb186-21"><a href="#cb186-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb186-22"><a href="#cb186-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">lwd =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/ac eldercare kd2sfca.png" class="img-fluid"></p>
<p>CHAS clinics:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(chas_hexagon_KD2SFCA,</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">bbox =</span> mapex) <span class="sc">+</span> </span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">"accKD2SFCA"</span>,</span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">10</span>,</span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"quantile"</span>,</span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(chas) <span class="sc">+</span></span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb187-11"><a href="#cb187-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Accessibility to CHAS clinics: KD2SFCA method"</span>,</span>
<span id="cb187-12"><a href="#cb187-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb187-13"><a href="#cb187-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb187-14"><a href="#cb187-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside =</span> <span class="cn">FALSE</span>,</span>
<span id="cb187-15"><a href="#cb187-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb187-16"><a href="#cb187-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">3.0</span>,</span>
<span id="cb187-17"><a href="#cb187-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.format =</span> <span class="fu">list</span>(<span class="at">digits =</span> <span class="dv">6</span>),</span>
<span id="cb187-18"><a href="#cb187-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>),</span>
<span id="cb187-19"><a href="#cb187-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb187-20"><a href="#cb187-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb187-21"><a href="#cb187-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb187-22"><a href="#cb187-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">lwd =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/ac chas kd2sfca.png" class="img-fluid"></p>
</section>
<section id="statistical-graphic-visualization-1" class="level2">
<h2 class="anchored" data-anchor-id="statistical-graphic-visualization-1">8.3 Statistical graphic visualization</h2>
<p>We can use statistical graphic visualizations here too.</p>
<p>Eldercare:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>eldercare_kd2sfca <span class="ot">&lt;-</span> <span class="fu">left_join</span>(eldercare_hexagon_KD2SFCA, <span class="fu">st_drop_geometry</span>(mpsz), </span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">SUBZONE</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'SUBZONE_N'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>eldercare_kd2sfca, </span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">log</span>(accKD2SFCA), </span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x=</span> REGION_N)) <span class="sc">+</span></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat=</span><span class="st">"summary"</span>, </span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fun.y=</span><span class="st">"mean"</span>, </span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span><span class="st">"red"</span>, </span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/eldercare kd2sfca stat plot.png" class="img-fluid"></p>
<p>CHAS clinics:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>chas_kd2sfca <span class="ot">&lt;-</span> <span class="fu">left_join</span>(chas_hexagon_KD2SFCA, <span class="fu">st_drop_geometry</span>(mpsz), </span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">SUBZONE</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'SUBZONE_N'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>chas_kd2sfca, </span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">log</span>(accKD2SFCA), </span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x=</span> REGION_N)) <span class="sc">+</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat=</span><span class="st">"summary"</span>, </span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fun.y=</span><span class="st">"mean"</span>, </span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span><span class="st">"red"</span>, </span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/chas kd2sfca stat plot.png" class="img-fluid"></p>
</section>
</section>
<section id="modelling-and-visualizing-accessibility-using-sam-method" class="level1">
<h1>9 Modelling and Visualizing Accessibility using SAM Method</h1>
<p>Similar to Hansen and KD2SFCA methods, we run the same steps with the change being in the family argument used in ac().</p>
<section id="computing-sams-accessibility" class="level2">
<h2 class="anchored" data-anchor-id="computing-sams-accessibility">9.1 Computing SAM’s accessibility</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>eldercare_acc_SAM <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>                                      eldercare<span class="sc">$</span>capacity,</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>                                      eldercare_distmat_km,</span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"SAM"</span>))</span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(eldercare_acc_SAM) <span class="ot">&lt;-</span> <span class="st">"accSAM"</span></span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a>eldercare_acc_SAM <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(eldercare_acc_SAM)</span>
<span id="cb192-9"><a href="#cb192-9" aria-hidden="true" tabindex="-1"></a>eldercare_hexagon_SAM <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, eldercare_acc_SAM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can do the same for the other types of facilities, as shown in the following code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>garden_acc_SAM <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>                                      garden<span class="sc">$</span>capacity,</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>                                      garden_distmat_km,</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"SAM"</span>))</span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(garden_acc_SAM) <span class="ot">&lt;-</span> <span class="st">"accSAM"</span></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>garden_acc_SAM <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(garden_acc_SAM)</span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a>garden_hexagon_SAM <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, garden_acc_SAM)</span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true" tabindex="-1"></a>chas_acc_SAM <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb193-12"><a href="#cb193-12" aria-hidden="true" tabindex="-1"></a>                                      chas<span class="sc">$</span>capacity,</span>
<span id="cb193-13"><a href="#cb193-13" aria-hidden="true" tabindex="-1"></a>                                      chas_distmat_km,</span>
<span id="cb193-14"><a href="#cb193-14" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb193-15"><a href="#cb193-15" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb193-16"><a href="#cb193-16" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"SAM"</span>))</span>
<span id="cb193-17"><a href="#cb193-17" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(chas_acc_SAM) <span class="ot">&lt;-</span> <span class="st">"accSAM"</span></span>
<span id="cb193-18"><a href="#cb193-18" aria-hidden="true" tabindex="-1"></a>chas_acc_SAM <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(chas_acc_SAM)</span>
<span id="cb193-19"><a href="#cb193-19" aria-hidden="true" tabindex="-1"></a>chas_hexagon_SAM <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, chas_acc_SAM)</span>
<span id="cb193-20"><a href="#cb193-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-21"><a href="#cb193-21" aria-hidden="true" tabindex="-1"></a>hospital_acc_SAM <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb193-22"><a href="#cb193-22" aria-hidden="true" tabindex="-1"></a>                                      hospital<span class="sc">$</span>capacity,</span>
<span id="cb193-23"><a href="#cb193-23" aria-hidden="true" tabindex="-1"></a>                                      hospital_distmat_km,</span>
<span id="cb193-24"><a href="#cb193-24" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb193-25"><a href="#cb193-25" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb193-26"><a href="#cb193-26" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"SAM"</span>))</span>
<span id="cb193-27"><a href="#cb193-27" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(hospital_acc_SAM) <span class="ot">&lt;-</span> <span class="st">"accSAM"</span></span>
<span id="cb193-28"><a href="#cb193-28" aria-hidden="true" tabindex="-1"></a>hospital_acc_SAM <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(hospital_acc_SAM)</span>
<span id="cb193-29"><a href="#cb193-29" aria-hidden="true" tabindex="-1"></a>hospital_hexagon_SAM <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, hospital_acc_SAM)</span>
<span id="cb193-30"><a href="#cb193-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-31"><a href="#cb193-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-32"><a href="#cb193-32" aria-hidden="true" tabindex="-1"></a>communitycentre_acc_SAM<span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb193-33"><a href="#cb193-33" aria-hidden="true" tabindex="-1"></a>                                       communitycentre<span class="sc">$</span>capacity,</span>
<span id="cb193-34"><a href="#cb193-34" aria-hidden="true" tabindex="-1"></a>                                       communitycentre_distmat_km,</span>
<span id="cb193-35"><a href="#cb193-35" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb193-36"><a href="#cb193-36" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb193-37"><a href="#cb193-37" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"SAM"</span>))</span>
<span id="cb193-38"><a href="#cb193-38" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(communitycentre_acc_SAM) <span class="ot">&lt;-</span> <span class="st">"accSAM"</span></span>
<span id="cb193-39"><a href="#cb193-39" aria-hidden="true" tabindex="-1"></a>communitycentre_acc_SAM <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(communitycentre_acc_SAM)</span>
<span id="cb193-40"><a href="#cb193-40" aria-hidden="true" tabindex="-1"></a>communitycentre_hexagon_SAM <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, communitycentre_acc_SAM)</span>
<span id="cb193-41"><a href="#cb193-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-42"><a href="#cb193-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-43"><a href="#cb193-43" aria-hidden="true" tabindex="-1"></a>park_acc_SAM <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">ac</span>(hex_sf<span class="sc">$</span>hexagon_demand,</span>
<span id="cb193-44"><a href="#cb193-44" aria-hidden="true" tabindex="-1"></a>                                      park<span class="sc">$</span>capacity,</span>
<span id="cb193-45"><a href="#cb193-45" aria-hidden="true" tabindex="-1"></a>                                      park_distmat_km,</span>
<span id="cb193-46"><a href="#cb193-46" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">d0 =</span> <span class="dv">50</span>,</span>
<span id="cb193-47"><a href="#cb193-47" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">power =</span> <span class="dv">2</span>,</span>
<span id="cb193-48"><a href="#cb193-48" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">family =</span> <span class="st">"SAM"</span>))</span>
<span id="cb193-49"><a href="#cb193-49" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(park_acc_SAM) <span class="ot">&lt;-</span> <span class="st">"accSAM"</span></span>
<span id="cb193-50"><a href="#cb193-50" aria-hidden="true" tabindex="-1"></a>park_acc_SAM <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(park_acc_SAM)</span>
<span id="cb193-51"><a href="#cb193-51" aria-hidden="true" tabindex="-1"></a>park_hexagon_SAM <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(hex_sf, park_acc_SAM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="visualizing-sams-accessibility" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-sams-accessibility">9.2 Visualizing SAM’s accessibility</h2>
<p>Eldercare:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(eldercare_hexagon_SAM,</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">bbox =</span> mapex) <span class="sc">+</span> </span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">"accSAM"</span>,</span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">5</span>,</span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"fisher"</span>,</span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">na.rm =</span> <span class="cn">TRUE</span>,</span>
<span id="cb194-8"><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb194-9"><a href="#cb194-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb194-10"><a href="#cb194-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(eldercare) <span class="sc">+</span></span>
<span id="cb194-11"><a href="#cb194-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb194-12"><a href="#cb194-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Accessibility to eldercare: SAM method"</span>,</span>
<span id="cb194-13"><a href="#cb194-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb194-14"><a href="#cb194-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb194-15"><a href="#cb194-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside =</span> <span class="cn">FALSE</span>,</span>
<span id="cb194-16"><a href="#cb194-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb194-17"><a href="#cb194-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">3.0</span>,</span>
<span id="cb194-18"><a href="#cb194-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.format =</span> <span class="fu">list</span>(<span class="at">digits =</span> <span class="dv">6</span>),</span>
<span id="cb194-19"><a href="#cb194-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>),</span>
<span id="cb194-20"><a href="#cb194-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb194-21"><a href="#cb194-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb194-22"><a href="#cb194-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb194-23"><a href="#cb194-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">lwd =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/ac eldercare SAM.png" class="img-fluid"></p>
<p>Parks:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(park_hexagon_SAM,</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">bbox =</span> mapex) <span class="sc">+</span> </span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">"accSAM"</span>,</span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">5</span>,</span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"fisher"</span>,</span>
<span id="cb195-7"><a href="#cb195-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">na.rm =</span> <span class="cn">TRUE</span>,</span>
<span id="cb195-8"><a href="#cb195-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb195-9"><a href="#cb195-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">border.lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb195-10"><a href="#cb195-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(eldercare) <span class="sc">+</span></span>
<span id="cb195-11"><a href="#cb195-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb195-12"><a href="#cb195-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Accessibility to parks: SAM method"</span>,</span>
<span id="cb195-13"><a href="#cb195-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb195-14"><a href="#cb195-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb195-15"><a href="#cb195-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside =</span> <span class="cn">FALSE</span>,</span>
<span id="cb195-16"><a href="#cb195-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb195-17"><a href="#cb195-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">3.0</span>,</span>
<span id="cb195-18"><a href="#cb195-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.format =</span> <span class="fu">list</span>(<span class="at">digits =</span> <span class="dv">6</span>),</span>
<span id="cb195-19"><a href="#cb195-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>),</span>
<span id="cb195-20"><a href="#cb195-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb195-21"><a href="#cb195-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type=</span><span class="st">"8star"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb195-22"><a href="#cb195-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb195-23"><a href="#cb195-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">lwd =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/ac park SAM.png" class="img-fluid"></p>
</section>
<section id="statistical-graphic-visualization-2" class="level2">
<h2 class="anchored" data-anchor-id="statistical-graphic-visualization-2">9.3 Statistical graphic visualization</h2>
<p>Eldercare:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>eldercare_SAM <span class="ot">&lt;-</span> <span class="fu">left_join</span>(eldercare_hexagon_SAM, <span class="fu">st_drop_geometry</span>(mpsz), </span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">SUBZONE</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'SUBZONE_N'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>eldercare_SAM, </span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">log</span>(accSAM), </span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x=</span> REGION_N)) <span class="sc">+</span></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat=</span><span class="st">"summary"</span>, </span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fun.y=</span><span class="st">"mean"</span>, </span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span><span class="st">"red"</span>, </span>
<span id="cb197-8"><a href="#cb197-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/eldercare sam stat plot.png" class="img-fluid"></p>
<p>Parks:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>park_SAM <span class="ot">&lt;-</span> <span class="fu">left_join</span>(park_hexagon_SAM, <span class="fu">st_drop_geometry</span>(mpsz), </span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">by =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">SUBZONE</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'SUBZONE_N'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>park_SAM, </span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">log</span>(accSAM), </span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x=</span> REGION_N)) <span class="sc">+</span></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat=</span><span class="st">"summary"</span>, </span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fun.y=</span><span class="st">"mean"</span>, </span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span><span class="st">"red"</span>, </span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/park SAM stat plot.png" class="img-fluid"></p>
<p>We can run the same steps to visualize the statistical plots of other facilities.</p>
<p>We’re done with the analyses!!!!! Hurray!!!</p>
</section>
</section>
<section id="moving-forward-project-ui-design" class="level1">
<h1>10 Moving Forward: Project UI Design</h1>
<p>From this take-home exercise, I had a better understanding of how I can potentially integrate such analysis into our ShinyApp for users to gain insights. In our ShinyApp webpage, there would be 3 tabs for users to conduct different types of analysis based on our respective modules.</p>
<p>In the Accessibility Analysis tab, we would potentially implement the following options on the left pane for users to customize their type of accessibility analysis.</p>
<table class="table">
<colgroup>
<col style="width: 40%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th>Type of Option</th>
<th>Option Values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Accessibility Analysis Method</td>
<td><ul>
<li><p>Hansen</p></li>
<li><p>KD2SFCA</p></li>
<li><p>SAM</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Facility</td>
<td><ul>
<li><p>Eldercare centres</p></li>
<li><p>CHAS clinics</p></li>
<li><p>Community gardens</p></li>
<li><p>Hospitals</p></li>
<li><p>Parks</p></li>
<li><p>Community Centres</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Accessibility analysis d0 value</td>
<td>Values of d0 in intervals of 20 ranging from 20 to 200</td>
</tr>
<tr class="even">
<td>Visualization Classification Method</td>
<td><p>List of various classification methods, for example:</p>
<ul>
<li><p>quantile</p></li>
<li><p>pretty</p></li>
<li><p>fisher</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Subzone 1</td>
<td><p>List of planning subzones, for example:</p>
<ul>
<li><p>Ang Mo Kio Town Centre</p></li>
<li><p>Tampines East</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Subzone 2</td>
<td><p>List of planning subzones, for example:</p>
<ul>
<li><p>Ang Mo Kio Town Centre</p></li>
<li><p>Tampines East</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>We would most likely offer at most 5 options to prevent the UI from appearing too complicated and overwhelming for users.</p>
<p>Additionally, if possible, we would look into adding the option to include network analysis, on top of the existing Euclidean distance analysis.</p>
<p>On the right pane, the results of the analysis would be displayed.</p>
<p>Below is a sketch of how we expect the UI to look like. Nonetheless, we are still exploring and there might be changes made along the way.</p>
<p><img src="images/project ui.png" class="img-fluid"></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>