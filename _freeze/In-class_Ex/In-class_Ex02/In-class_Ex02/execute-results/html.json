{
  "hash": "4fc8444ccca9196d4de80890541f8910",
  "result": {
    "markdown": "---\ntitle: \"In-class Exercise 2: R for Geospatial Analytics\"\nformat: \n  html: \n    code-fold: true\n    code-summary: \"Show the code\"\nexecute:\n  freeze: true\n  eval: true\n  echo: true\n  warning: FALSE\neditor: visual\ndate: \"January 15, 2024\"\n---\n\n\n# 2.1 Getting Started\n\nTo begin with, we will use p_load() from pacman package to load the following packages:\n\n-   arrow,\n\n-   lubridate,\n\n-   tidyverse,\n\n-   tmap, and\n\n-   sf.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(arrow, lubridate, tidyverse, tmap, sf)\n```\n:::\n\n\n# 2.2 Importing Grab-Posisi Dataset\n\nImport the parquet file into R and name the data frame as df:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read_parquet(\"data/GrabPosisi/part-00008-8bbff892-97d2-4011-9961-703e38972569.c000.snappy.parquet\")\n```\n:::\n\n\nTo convert pingtimestamp field from integer to datetime data format:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf$pingtimestamp <- as_datetime(df$pingtimestamp)\n```\n:::\n\n\nSave the newly reformatted df data frame as rds for future use:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_rds(df, \"data/rds/part0.rds\")\n```\n:::\n\n\nExtracting trip starting locations\n\n\n::: {.cell}\n\n```{.r .cell-code}\norigin_df <- df %>%\n  group_by(trj_id) %>%\n  arrange(pingtimestamp) %>%\n  filter(row_number() == 1) %>%\n  mutate(weekday = wday(pingtimestamp,\n                         label = TRUE,\n                         abbr = TRUE),\n         start_hr = factor(hour(pingtimestamp)),\n         day = factor(mday(pingtimestamp)))\n```\n:::\n\n\nExtracting trip destination locations\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndestination_df <- df %>%\n  group_by(trj_id) %>%\n  arrange(desc(pingtimestamp)) %>%\n  filter(row_number() == 1) %>%\n  mutate(weekday = wday(pingtimestamp,\n                         label = TRUE,\n                         abbr = TRUE),\n         end_hr = factor(hour(pingtimestamp)),\n         day = factor(mday(pingtimestamp)))\n```\n:::\n\n\nSave the newly created origin_df and destination_df dataframes as rds files for future use:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_rds(origin_df,\"data/rds/origin_df.rds\")\nwrite_rds(destination_df, \"data/rds/destination_df.rds\")\n```\n:::\n\n\nTo import the objects the next time I reopen the R project,\n\n\n::: {.cell}\n\n```{.r .cell-code}\norigin_df <- read_rds(\"data/rds/origin_df.rds\")\ndestination_df <- read_rds(\"data/rds/destination_df.rds\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}